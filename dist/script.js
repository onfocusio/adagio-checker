/*! For license information please see script.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{T:()=>ct});var t,o,r,n,i={overlayFrame:void 0,overlayFrameDoc:void 0,activeTab:void 0,isDragged:!1},s={prebidObject:void 0,prebidWrappers:[],prebidWrapper:void 0,adagioAdapter:void 0,prebidVersionDetected:void 0},a={apiKeyDetected:!1,matchedDomainsRecords:null,matchedSiteNameRecords:null,successRecordItems:null,detectedCountryCodeIso3:null},c={prebidEvents:void 0,prebidBidsRequested:void 0,prebidAdagioBidsRequested:void 0,prebidBids:void 0,prebidBidders:void 0,prebidAdUnitsCodes:void 0,prebidAdagioAdUnitsCodes:void 0,adagioBidsRequested:void 0,adagioPbjsAdUnitsCode:[],prebidAdagioParams:void 0,totalPrebidAdUnitsCodes:0,totalPrebidAdagioAdUnitsCode:0,totalAdagioAdUnitsCodes:0,totalAdagioPbjsAdUnitsCodes:0,organizationIds:[],siteNames:[]},d=Object.freeze({logo:'<svg viewBox="0 0 101 92" style="height:1.5em;"><path d="M97 88.598H84.91l-33.473-72.96-.817-1.707-6.398 13.836 28.143 60.916h-12.2l-.106-.237-21.82-47.743-6.428 13.9 15.978 34.08H35.59l-9.802-21.056-9.698 20.97H4L43.109 4H57.89L97 88.598Z"></path></svg>',checker:'<svg viewBox="0 0 24 24" style="height:1.2em;"><path d="M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 18.5c-.82 0-1.5-.67-1.5-1.5s.68-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM19 5v4H5V5h14m1-2H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 8.5c-.82 0-1.5-.67-1.5-1.5S6.18 5.5 7 5.5s1.5.68 1.5 1.5S7.83 8.5 7 8.5z"></path></svg>',adunits:'<svg viewBox="0 0 24 24" style="height:1.2em;"><path d="M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zM7 4V3h10v1H7zm0 14V6h10v12H7zm0 3v-1h10v1H7z"></path><path d="M16 7H8v2h8V7z"></path></svg>',prebid:'<svg viewBox="0 0 24 24" style="height:1.2em"><g><g><g><path d="M19.973 4.724H.746A.743.743 0 0 1 0 3.978c0-.414.331-.746.746-.746H19.89c.415 0 .746.332.746.746.083.414-.248.746-.663.746z"/></g><g><path d="M27.35 8.868H4.391a.743.743 0 0 1-.745-.746c0-.414.331-.746.745-.746H27.35c.415 0 .746.332.746.746a.743.743 0 0 1-.746.746z"/></g><g><path d="M25.029 21.3H2.072a.743.743 0 0 1-.746-.747c0-.414.332-.745.746-.745h22.957c.414 0 .746.331.746.745 0 .332-.332.746-.746.746z"/></g><g><path d="M17.238 13.012H2.984a.743.743 0 0 1-.746-.746c0-.415.331-.746.746-.746h14.254c.415 0 .746.331.746.746a.743.743 0 0 1-.746.746z"/></g><g><path d="M23.371 17.155H7.045a.743.743 0 0 1-.746-.745c0-.415.331-.746.746-.746H23.37c.415 0 .746.331.746.746 0 .331-.331.745-.746.745z"/></g></g></g></svg>',debbuging:'<svg viewBox="0 0 24 24" style="height:1.2em;"><path d="M4.6 15c-.9-2.6-.6-4.6-.5-5.4 2.4-1.5 5.3-2 8-1.3.7-.3 1.5-.5 2.3-.6-.1-.3-.2-.5-.3-.8h2l1.2-3.2-.9-.4-1 2.6h-1.8C13 4.8 12.1 4 11.1 3.4l2.1-2.1-.7-.7L10.1 3c-.7 0-1.5 0-2.3.1L5.4.7l-.7.7 2.1 2.1C5.7 4.1 4.9 4.9 4.3 6H2.5l-1-2.6-.9.4L1.8 7h2C3.3 8.3 3 9.6 3 11H1v1h2c0 1 .2 2 .5 3H1.8L.6 18.3l.9.3 1-2.7h1.4c.4.8 2.1 4.5 5.8 3.9-.3-.2-.5-.5-.7-.8-2.9 0-4.4-3.5-4.4-4zM9 3.9c2 0 3.7 1.6 4.4 3.8-2.9-1-6.2-.8-9 .6.7-2.6 2.5-4.4 4.6-4.4zm14.8 19.2l-4.3-4.3c2.1-2.5 1.8-6.3-.7-8.4s-6.3-1.8-8.4.7-1.8 6.3.7 8.4c2.2 1.9 5.4 1.9 7.7 0l4.3 4.3c.2.2.5.2.7 0 .2-.2.2-.5 0-.7zm-8.8-3c-2.8 0-5.1-2.3-5.1-5.1s2.3-5.1 5.1-5.1 5.1 2.3 5.1 5.1-2.3 5.1-5.1 5.1z"/><path fill="none" d="M0 0h24v24H0z"/></svg>',refresh:'<svg viewBox="0 0 24 24" style="height:1.2em;"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></svg>',info:'<svg viewBox="0 0 416.979 416.979" style="height:1.2em;"><path d="M356.004,61.156c-81.37-81.47-213.377-81.551-294.848-0.182c-81.47,81.371-81.552,213.379-0.181,294.85 c81.369,81.47,213.378,81.551,294.849,0.181C437.293,274.636,437.375,142.626,356.004,61.156z M237.6,340.786 c0,3.217-2.607,5.822-5.822,5.822h-46.576c-3.215,0-5.822-2.605-5.822-5.822V167.885c0-3.217,2.607-5.822,5.822-5.822h46.576 c3.215,0,5.822,2.604,5.822,5.822V340.786z M208.49,137.901c-18.618,0-33.766-15.146-33.766-33.765 c0-18.617,15.147-33.766,33.766-33.766c18.619,0,33.766,15.148,33.766,33.766C242.256,122.755,227.107,137.901,208.49,137.901z"></path></svg>',api_grey:'<svg viewBox="0 0 24 24" style="height:1.2em;"><circle cx="12" cy="12" r="10" fill="grey"/></svg>',api_green:'<svg viewBox="0 0 24 24" style="height:1.2em;"><circle cx="12" cy="12" r="10" fill="green"/></svg>',api_red:'<svg viewBox="0 0 24 24" style="height:1.2em;"><circle cx="12" cy="12" r="10" fill="red"/></svg>',api_orange:'<svg viewBox="0 0 24 24" style="height:1.2em;"><circle cx="12" cy="12" r="10" fill="orange"/></svg>'}),l=Object.freeze({checker:"Checker",adunits:"Adunits"}),u=Object.freeze({green_txt:"rgb(48 158 133)",green_bkg:"rgb(226 248 243)",red_txt:"rgb(179 49 90)",red_bkg:"rgb(253 226 235)",yellow_txt:"rgb(180 130 59)",yellow_bkg:"rgb(253 243 228)",blue_txt:"rgb(38, 130, 185)",blue_bkg:"rgb(222, 241, 248)",grey_txt:"rgb(120, 120, 120)",grey_bkg:"rgb(230, 230, 230)"}),p=Object.freeze({ok:'<kbd style="color:'.concat(u.green_txt,";background-color:").concat(u.green_bkg,';">OK</kbd>'),ko:'<kbd style="color:'.concat(u.red_txt,";background-color:").concat(u.red_bkg,';">KO</kbd>'),check:'<kbd style="color:'.concat(u.yellow_txt,";background-color:").concat(u.yellow_bkg,';">!?</kbd>'),update:'<kbd style="color:'.concat(u.yellow_txt,";background-color:").concat(u.yellow_bkg,';">Update</kbd>'),info:'<kbd style="color:'.concat(u.blue_txt,";background-color:").concat(u.blue_bkg,';">Info</kbd>'),na:'<kbd style="color:'.concat(u.grey_txt,";background-color:").concat(u.grey_bkg,';">N/A</kbd>')}),h=Object.freeze({adserver:"Adserver",prebid:"Prebid.js (wrapper)",adapter:"Adagio adapter",analytics:"Adagio analytics",userids:"User IDs (UIDs)",localstorage:"Local storage",deviceaccess:"9️⃣ Device access",adunits:"Adunits",duplicated:"Duplicated adUnitCode",usersync:"User sync (iframe)",floors:"Floors price module",currency:"Currency module",rtdmodule:"9️⃣ Real time data (RTD)",dsa:"DSA Transparency"}),v=Object.freeze({prebidnotfound:"Prebid.js not found"});function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],o=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}}throw new TypeError(f(e)+" is not iterable")}function g(e){var t=Object(e),o=[];for(var r in t)o.unshift(r);return function e(){for(;o.length;)if((r=o.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function b(){var e,t,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function i(o,r,n,i){var c=r&&r.prototype instanceof a?r:a,d=Object.create(c.prototype);return y(d,"_invoke",function(o,r,n){var i,a,c,d=0,l=n||[],u=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,o){return i=t,a=0,c=e,p.n=o,s}};function h(o,r){for(a=o,c=r,t=0;!u&&d&&!n&&t<l.length;t++){var n,i=l[t],h=p.p,v=i[2];o>3?(n=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=h&&((n=o<2&&h<i[1])?(a=0,p.v=r,p.n=i[1]):h<v&&(n=o<3||i[0]>r||r>v)&&(i[4]=o,i[5]=r,p.n=v,a=0))}if(n||o>1)return s;throw u=!0,r}return function(n,l,v){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&h(l,v),a=l,c=v;(t=a<2?e:c)||!u;){i||(a?a<3?(a>1&&(p.n=-1),h(a,c)):p.n=c:p.v=c);try{if(d=2,i){if(a||(n="next"),t=i[n]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),a=1);i=e}else if((t=(u=p.n<0)?c:o.call(r,p))!==s)break}catch(t){i=e,a=1,c=t}finally{d=1}}return{value:t,done:u}}}(o,n,i),!0),d}var s={};function a(){}function c(){}function d(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),u=d.prototype=a.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,y(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,y(u,"constructor",d),y(d,"constructor",c),c.displayName="GeneratorFunction",y(d,n,"GeneratorFunction"),y(u),y(u,n,"Generator"),y(u,r,function(){return this}),y(u,"toString",function(){return"[object Generator]"}),(b=function(){return{w:i,m:p}})()}function y(e,t,o,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}y=function(e,t,o,r){function i(t,o){y(e,t,function(e){return this._invoke(t,o,e)})}t?n?n(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},y(e,t,o,r)}function A(e,t,o,r,n,i,s){try{var a=e[i](s),c=a.value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(r,n)}function C(e){return function(){var t=this,o=arguments;return new Promise(function(r,n){var i=e.apply(t,o);function s(e){A(i,r,n,s,a,"next",e)}function a(e){A(i,r,n,s,a,"throw",e)}s(void 0)})}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,i,s,a=[],c=!0,d=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(r=i.call(o)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=o.return&&(s=o.return(),Object(s)!==s))return}finally{if(d)throw n}}return a}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return w(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}function S(){var e,t=function(e,t){t.forEach(function(t){var o=e[t];null!=o&&o.version&&"function"==typeof o.getEvents&&!s.prebidWrappers.some(function(o){var r=E(o,2),n=r[0],i=r[1];return n===t&&i===e})&&s.prebidWrappers.push([t,e])})};if(window._pbjsGlobals&&t(window,window._pbjsGlobals),Array.from(window.document.getElementsByTagName("iframe")).forEach(function(e){try{var o=e.contentWindow;o._pbjsGlobals&&t(o,o._pbjsGlobals)}catch(e){}}),void 0!==s.adagioAdapter&&void 0!==(null===(e=s.adagioAdapter)||void 0===e?void 0:e.versions)&&t(window,Object.keys(s.adagioAdapter.versions).filter(function(e){return"adagiojs"!==e})),0!==s.prebidWrappers.length){var o,r,n=0,i=null;s.prebidWrappers.forEach(function(e){var t=E(e,2),s=t[0],a=t[1],c=a[s];if(null!=c&&c.getEvents){var d,l=(null===(d=c.getEvents())||void 0===d?void 0:d.filter(function(e){return"bidRequested"===e.eventType}))||[],u=l.length,p=l.filter(function(e){var t;return null===(t=e.bidder)||void 0===t?void 0:t.toLowerCase().includes("adagio")}).length;u>=n&&(n=u,i=[s,a]),p>=o&&(o=p,r=[s,a])}}),void 0===s.prebidWrapper&&void 0===s.prebidObject&&(s.prebidWrapper=o>0?r:n>0?i:s.prebidWrappers[0],s.prebidObject=s.prebidWrapper[1][s.prebidWrapper[0]])}}function L(){return O.apply(this,arguments)}function O(){return(O=C(b().m(function e(){var t,o,r;return b().w(function(e){for(;;)switch(e.n){case 0:if(t=i.overlayFrameDoc.getElementById("apiButton"),"undefined"!=typeof ADAGIO_KEY){e.n=1;break}return t.innerHTML=d.api_red,t.setAttribute("title","Adagio API - 'ADAGIO_KEY' is not defined in the bookmarklet."),e.a(2);case 1:if(""!==ADAGIO_KEY){e.n=2;break}return t.innerHTML=d.api_red,t.setAttribute("title","Adagio API - 'ADAGIO_KEY' value is empty in the bookmarklet."),e.a(2);case 2:a.apiKeyDetected=!0;case 3:if(o=null,0!==c.organizationIds.length){e.n=4;break}t.innerHTML=d.api_orange,t.setAttribute("title","Adagio API - No organizationId detected in traffic."),e.n=7;break;case 4:if(!(c.organizationIds.length>1)){e.n=5;break}t.innerHTML=d.api_orange,t.setAttribute("title","Adagio API - Multiple organizations detected in traffic (not supported)."),e.n=7;break;case 5:return o="filter=publisher_id||$eq||".concat(encodeURIComponent(c.organizationIds[0])),e.n=6,k(o);case 6:null!==(r=e.v)&&null!==r.records?(a.matchedDomainsRecords=r.records.filter(function(e){return window.location.hostname.includes(e.domain)})||null,a.matchedSiteNameRecords=r.records.filter(function(e){return c.siteNames.includes(e.name)})||null,a.successRecordItems=a.matchedDomainsRecords.filter(function(e){return a.matchedSiteNameRecords.filter(function(t){return e===t})})||null,null===a.matchedDomainsRecords?(t.innerHTML=d.api_orange,t.setAttribute("title","Adagio API - No manager domain match: '".concat(window.location.hostname,"'."))):null===a.matchedSiteNameRecords?(t.innerHTML=d.api_orange,t.setAttribute("title","Adagio API - No manager sitename match: ".concat(c.siteNames,"'."))):null===a.successRecordItems?(t.innerHTML=d.api_orange,t.setAttribute("title","Adagio API - No manager domain and sitename match: '".concat(window.location.hostname,"' / '").concat(c.siteNames,"'."))):(t.innerHTML=d.api_green,t.setAttribute("title","Adagio API - Successfull record(s) fetched."))):(t.innerHTML=d.api_orange,t.setAttribute("title","Adagio API - No manager organizationId match: '".concat(c.organizationIds[0],"'.")));case 7:return e.a(2)}},e)}))).apply(this,arguments)}function k(e){return T.apply(this,arguments)}function T(){return(T=C(b().m(function e(t){var o,r,n,s,a,c;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return o="https://api.adagio.io/api/v1/groups/1/websites?".concat(t),r=l.checker.toLowerCase().replace(" ","-"),n=i.overlayFrameDoc.getElementById("".concat(r,"-alert")),e.p=1,e.n=2,fetch(o,{method:"GET",headers:{Authorization:"Bearer ".concat(ADAGIO_KEY)}});case 2:if((s=e.v).ok){e.n=3;break}throw new Error(s.status);case 3:return e.n=4,s.json();case 4:return a=e.v,e.a(2,a);case 5:return e.p=5,c=e.v,console.log(c),n.innerHTML+="<small>• Adagio API - <code>🔴 Error on loading: ".concat(c,"</code></small><br>"),e.a(2,null)}},e,null,[[1,5]])}))).apply(this,arguments)}function D(){return _.apply(this,arguments)}function _(){return(_=C(b().m(function e(){var t,o,r,n,s,a,d,u,p;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=null,o=null,r=l.checker.toLowerCase().replace(" ","-"),n=i.overlayFrameDoc.getElementById("".concat(r,"-alert")),!(c.organizationIds.length>0)){e.n=9;break}return e.p=1,e.n=2,fetch("https://adagio.io/sellers.json");case 2:return s=e.v,e.n=3,s.json();case 3:t=e.v,n.innerHTML+="<small>• Organization(s) detected: </small>",a=b().m(function e(r){var i;return b().w(function(e){for(;;)switch(e.n){case 0:o=null===(i=t)||void 0===i?void 0:i.sellers.filter(function(e){return e.seller_id===c.organizationIds[r]}),n.innerHTML+="<small><code>".concat(o[0].name," (").concat(o[0].seller_id,") - ").concat(o[0].seller_type,"</code></small><br>");case 1:return e.a(2)}},e)}),u=g(c.organizationIds);case 4:if((p=u()).done){e.n=6;break}return d=p.value,e.d(m(a(d)),5);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,e.v,t=null;case 8:e.n=10;break;case 9:n.innerHTML+="<small>• No organization(s) detected... Try to refresh the checker or the page.";case 10:return e.a(2)}},e,null,[[1,7]])}))).apply(this,arguments)}function F(){return P.apply(this,arguments)}function P(){return(P=C(b().m(function e(){var t,o,r;return b().w(function(e){for(;;)switch(e.n){case 0:return r=function(e){var t,o=e.toUpperCase().split("").map(function(e){return 127397+e.charCodeAt()});return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e))return w(e)}(t=o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||I(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},t=l.checker.toLowerCase().replace(" ","-"),o=i.overlayFrameDoc.getElementById("".concat(t,"-alert")),e.n=1,fetch("https://ipapi.co/json/").then(function(e){return e.json()}).then(function(e){var t=e.country_code,n=e.country_name;a.detectedCountryCodeIso3=e.country_code_iso3;var i=r(t);"France"!==n&&(o.innerHTML+="<small>• Current location detected: <code>".concat(n,"</code> (").concat(i,")</small><br>"))}).catch(function(e){return console.error("Error fetching country data:",e)});case 1:return e.a(2)}},e)}))).apply(this,arguments)}function N(e){return e.includes(p.ko)?p.ko:e.includes(p.check)?p.check:e.includes(p.update)?p.update:e.includes(p.info)?p.info:p.ok}class V extends Error{constructor(e){super(e),this.name="DecodingError"}}class x extends Error{constructor(e){super(e),this.name="EncodingError"}}class R extends Error{constructor(e){super(e),this.name="GVLError"}}class j extends Error{constructor(e,t,o=""){super(`invalid value ${t} passed for ${e} ${o}`),this.name="TCModelError"}}class U{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(e){if(!/^[0-1]+$/.test(e))throw new x("Invalid bitField");const t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";let o="";for(let t=0;t<e.length;t+=this.BASIS)o+=this.DICT[parseInt(e.substr(t,this.BASIS),2)];return o}static decode(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new V("Invalidly encoded Base64URL string");let t="";for(let o=0;o<e.length;o++){const r=this.REVERSE_DICT.get(e[o]).toString(2);t+="0".repeat(this.BASIS-r.length)+r}return t}}class M{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(e){return M.langSet.has(e)}forEach(e){M.langSet.forEach(e)}get size(){return M.langSet.size}}class H{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardStacks="useNonStandardStacks";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class B{clone(){const e=new this.constructor;return Object.keys(this).forEach(t=>{const o=this.deepClone(this[t]);void 0!==o&&(e[t]=o)}),e}deepClone(e){const t=typeof e;if("number"===t||"string"===t||"boolean"===t)return e;if(null!==e&&"object"===t){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){const t=[];for(const o of e)t.push(this.deepClone(o));return e instanceof Array?t:new e.constructor(t)}{const t={};for(const o in e)e.hasOwnProperty(o)&&(t[o]=this.deepClone(e[o]));return t}}}}!function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(t||(t={}));class G extends B{static hashSeparator="-";purposeId_;restrictionType;constructor(e,t){super(),void 0!==e&&(this.purposeId=e),void 0!==t&&(this.restrictionType=t)}static unHash(e){const t=e.split(this.hashSeparator),o=new G;if(2!==t.length)throw new j("hash",e);return o.purposeId=parseInt(t[0],10),o.restrictionType=parseInt(t[1],10),o}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${G.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(e){this.purposeId_=e}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===t.NOT_ALLOWED||this.restrictionType===t.REQUIRE_CONSENT||this.restrictionType===t.REQUIRE_LI)}isSameAs(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}}class z extends B{root=null;getRoot(){return this.root}isEmpty(){return!this.root}add(e){const t={value:e,left:null,right:null};let o;if(this.isEmpty())this.root=t;else for(o=this.root;;)if(e<o.value){if(null===o.left){o.left=t;break}o=o.left}else{if(!(e>o.value))break;if(null===o.right){o.right=t;break}o=o.right}}get(){const e=[];let t=this.root;for(;t;)if(t.left){let o=t.left;for(;o.right&&o.right!=t;)o=o.right;o.right==t?(o.right=null,e.push(t.value),t=t.right):(o.right=t,t=t.left)}else e.push(t.value),t=t.right;return e}contains(e){let t=!1,o=this.root;for(;o;){if(o.value===e){t=!0;break}e>o.value?o=o.right:e<o.value&&(o=o.left)}return t}min(e=this.root){let t;for(;e;)e.left?e=e.left:(t=e.value,e=null);return t}max(e=this.root){let t;for(;e;)e.right?e=e.right:(t=e.value,e=null);return t}remove(e,t=this.root){let o=null,r="left";for(;t;)if(e<t.value)o=t,t=t.left,r="left";else if(e>t.value)o=t,t=t.right,r="right";else{if(t.left||t.right)if(t.left)if(t.right){const e=this.min(t.right);this.remove(e,t.right),t.value=e}else o?o[r]=t.left:this.root=t.left;else o?o[r]=t.right:this.root=t.right;else o?o[r]=null:this.root=null;t=null}}static build(e){if(e&&0!==e.length){if(1===e.length){const t=new z;return t.add(e[0]),t}{const t=e.length>>1,o=new z;o.add(e[t]);const r=o.getRoot();if(r){if(t+1<e.length){const o=z.build(e.slice(t+1));r.right=o?o.getRoot():null}if(t-1>0){const o=z.build(e.slice(0,t-1));r.left=o?o.getRoot():null}}return o}}return null}}class W extends B{bitLength=0;map=new Map;gvl_;has(e){return this.map.has(e)}isOkToHave(e,o,r){let n=!0;if(this.gvl?.vendors){const i=this.gvl.vendors[r];if(i)if(e===t.NOT_ALLOWED)n=i.legIntPurposes.includes(o)||i.purposes.includes(o);else if(i.flexiblePurposes.length)switch(e){case t.REQUIRE_CONSENT:n=i.flexiblePurposes.includes(o)&&i.legIntPurposes.includes(o);break;case t.REQUIRE_LI:n=i.flexiblePurposes.includes(o)&&i.purposes.includes(o)}else n=!1;else n=!1}return n}add(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){const o=t.hash;this.has(o)||(this.map.set(o,new z),this.bitLength=0),this.map.get(o).add(e)}}restrictPurposeToLegalBasis(e){const t=this.gvl.vendorIds,o=e.hash,r=function(){let e;for(e of t);return e}(),n=[...Array(r).keys()].map(e=>e+1);for(let e=1;e<=r;e++)this.has(o)||(this.map.set(o,z.build(n)),this.bitLength=0),this.map.get(o).add(e)}getVendors(e){let t=[];if(e){const o=e.hash;this.has(o)&&(t=this.map.get(o).get())}else{const e=new Set;this.map.forEach(t=>{t.get().forEach(t=>{e.add(t)})}),t=Array.from(e)}return t}getRestrictionType(e,t){let o;return this.getRestrictions(e).forEach(e=>{e.purposeId===t&&(void 0===o||o>e.restrictionType)&&(o=e.restrictionType)}),o}vendorHasRestriction(e,t){let o=!1;const r=this.getRestrictions(e);for(let e=0;e<r.length&&!o;e++)o=t.isSameAs(r[e]);return o}getMaxVendorId(){let e=0;return this.map.forEach(t=>{e=Math.max(t.max(),e)}),e}getRestrictions(e){const t=[];return this.map.forEach((o,r)=>{e?o.contains(e)&&t.push(G.unHash(r)):t.push(G.unHash(r))}),t}getPurposes(){const e=new Set;return this.map.forEach((t,o)=>{e.add(G.unHash(o).purposeId)}),Array.from(e)}remove(e,t){const o=t.hash,r=this.map.get(o);r&&(r.remove(e),r.isEmpty()&&(this.map.delete(o),this.bitLength=0))}set gvl(e){this.gvl_||(this.gvl_=e,this.map.forEach((e,t)=>{const o=G.unHash(t);e.get().forEach(t=>{this.isOkToHave(o.restrictionType,o.purposeId,t)||e.remove(t)})}))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(e){e.COOKIE="cookie",e.WEB="web",e.APP="app"}(o||(o={})),function(e){e.CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"}(r||(r={}));class J{static ID_TO_KEY=[r.CORE,r.VENDORS_DISCLOSED,r.VENDORS_ALLOWED,r.PUBLISHER_TC];static KEY_TO_ID={[r.CORE]:0,[r.VENDORS_DISCLOSED]:1,[r.VENDORS_ALLOWED]:2,[r.PUBLISHER_TC]:3}}class q extends B{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let e=1;e<=this.maxId;e++)yield[e,this.has(e)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(e){return this.set_.has(e)}unset(e){Array.isArray(e)?e.forEach(e=>this.unset(e)):"object"==typeof e?this.unset(Object.keys(e).map(e=>Number(e))):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(e=>{this.maxId_=Math.max(this.maxId,e)})))}isIntMap(e){let t="object"==typeof e;return t=t&&Object.keys(e).every(t=>{let o=Number.isInteger(parseInt(t,10));return o=o&&this.isValidNumber(e[t].id),o=o&&void 0!==e[t].name,o}),t}isValidNumber(e){return parseInt(e,10)>0}isSet(e){let t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t}set(e){if(Array.isArray(e))e.forEach(e=>this.set(e));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(e=>Number(e)));else{if(!this.isValidNumber(e))throw new j("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}}empty(){this.set_=new Set}forEach(e){for(let t=1;t<=this.maxId;t++)e(this.has(t),t)}get size(){return this.set_.size}setAll(e){this.set(e)}}class ${static[H.cmpId]=12;static[H.cmpVersion]=12;static[H.consentLanguage]=12;static[H.consentScreen]=6;static[H.created]=36;static[H.isServiceSpecific]=1;static[H.lastUpdated]=36;static[H.policyVersion]=6;static[H.publisherCountryCode]=12;static[H.publisherLegitimateInterests]=24;static[H.publisherConsents]=24;static[H.purposeConsents]=24;static[H.purposeLegitimateInterests]=24;static[H.purposeOneTreatment]=1;static[H.specialFeatureOptins]=12;static[H.useNonStandardStacks]=1;static[H.vendorListVersion]=12;static[H.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class K{static encode(e,t){let o;if("string"==typeof e&&(e=parseInt(e,10)),o=e.toString(2),o.length>t||e<0)throw new x(`${e} too large to encode into ${t}`);return o.length<t&&(o="0".repeat(t-o.length)+o),o}static decode(e,t){if(t!==e.length)throw new V("invalid bit length");return parseInt(e,2)}}class Y{static encode(e,t){return K.encode(Math.round(e.getTime()/100),t)}static decode(e,t){if(t!==e.length)throw new V("invalid bit length");const o=new Date;return o.setTime(100*K.decode(e,t)),o}}class Q{static encode(e){return String(Number(e))}static decode(e){return"1"===e}}class X{static encode(e,t){let o="";for(let r=1;r<=t;r++)o+=Q.encode(e.has(r));return o}static decode(e,t){if(e.length!==t)throw new V("bitfield encoding length mismatch");const o=new q;for(let r=1;r<=t;r++)Q.decode(e[r-1])&&o.set(r);return o.bitLength=e.length,o}}class Z{static encode(e,t){const o=(e=e.toUpperCase()).charCodeAt(0)-65,r=e.charCodeAt(1)-65;if(o<0||o>25||r<0||r>25)throw new x(`invalid language code: ${e}`);if(t%2==1)throw new x(`numBits must be even, ${t} is not valid`);return t/=2,K.encode(o,t)+K.encode(r,t)}static decode(e,t){let o;if(t!==e.length||e.length%2)throw new V("invalid bit length for language");{const t=65,r=e.length/2,n=K.decode(e.slice(0,r),r)+t,i=K.decode(e.slice(r),r)+t;o=String.fromCharCode(n)+String.fromCharCode(i)}return o}}class ee{static encode(e){let t=K.encode(e.numRestrictions,$.numRestrictions);return e.isEmpty()||e.getRestrictions().forEach(o=>{t+=K.encode(o.purposeId,$.purposeId),t+=K.encode(o.restrictionType,$.restrictionType);const r=e.getVendors(o),n=r.length;let i=0,s=0,a="";for(let t=0;t<n;t++){const o=r[t];0===s&&(i++,s=o);const c=r[n-1],d=e.gvl.vendorIds,l=e=>{for(;++e<=c&&!d.has(e););return e};if(t===n-1||r[t+1]>l(o)){const e=!(o===s);a+=Q.encode(e),a+=K.encode(s,$.vendorId),e&&(a+=K.encode(o,$.vendorId)),s=0}}t+=K.encode(i,$.numEntries),t+=a}),t}static decode(e){let t=0;const o=new W,r=K.decode(e.substr(t,$.numRestrictions),$.numRestrictions);t+=$.numRestrictions;for(let n=0;n<r;n++){const r=K.decode(e.substr(t,$.purposeId),$.purposeId);t+=$.purposeId;const n=K.decode(e.substr(t,$.restrictionType),$.restrictionType);t+=$.restrictionType;const i=new G(r,n),s=K.decode(e.substr(t,$.numEntries),$.numEntries);t+=$.numEntries;for(let r=0;r<s;r++){const r=Q.decode(e.substr(t,$.anyBoolean));t+=$.anyBoolean;const n=K.decode(e.substr(t,$.vendorId),$.vendorId);if(t+=$.vendorId,r){const r=K.decode(e.substr(t,$.vendorId),$.vendorId);if(t+=$.vendorId,r<n)throw new V(`Invalid RangeEntry: endVendorId ${r} is less than ${n}`);for(let e=n;e<=r;e++)o.add(e,i)}else o.add(n,i)}}return o.bitLength=t,o}}!function(e){e[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"}(n||(n={}));class te{static encode(e){const t=[];let o,r=[],i=K.encode(e.maxId,$.maxId),s="";const a=$.maxId+$.encodingType,c=a+e.maxId,d=2*$.vendorId+$.singleOrRange+$.numEntries;let l=a+$.numEntries;return e.forEach((n,i)=>{s+=Q.encode(n),o=e.maxId>d&&l<c,o&&n&&(e.has(i+1)?0===r.length&&(r.push(i),l+=$.singleOrRange,l+=$.vendorId):(r.push(i),l+=$.vendorId,t.push(r),r=[]))}),o?(i+=String(n.RANGE),i+=this.buildRangeEncoding(t)):(i+=String(n.FIELD),i+=s),i}static decode(e,t){let o,r=0;const i=K.decode(e.substr(r,$.maxId),$.maxId);r+=$.maxId;const s=K.decode(e.charAt(r),$.encodingType);if(r+=$.encodingType,s===n.RANGE){if(o=new q,1===t){if("1"===e.substr(r,1))throw new V("Unable to decode default consent=1");r++}const n=K.decode(e.substr(r,$.numEntries),$.numEntries);r+=$.numEntries;for(let t=0;t<n;t++){const t=Q.decode(e.charAt(r));r+=$.singleOrRange;const n=K.decode(e.substr(r,$.vendorId),$.vendorId);if(r+=$.vendorId,t){const t=K.decode(e.substr(r,$.vendorId),$.vendorId);r+=$.vendorId;for(let e=n;e<=t;e++)o.set(e)}else o.set(n)}}else{const t=e.substr(r,i);r+=i,o=X.decode(t,i)}return o.bitLength=r,o}static buildRangeEncoding(e){const t=e.length;let o=K.encode(t,$.numEntries);return e.forEach(e=>{const t=1===e.length;o+=Q.encode(!t),o+=K.encode(e[0],$.vendorId),t||(o+=K.encode(e[1],$.vendorId))}),o}}function oe(){return{[H.version]:K,[H.created]:Y,[H.lastUpdated]:Y,[H.cmpId]:K,[H.cmpVersion]:K,[H.consentScreen]:K,[H.consentLanguage]:Z,[H.vendorListVersion]:K,[H.policyVersion]:K,[H.isServiceSpecific]:Q,[H.useNonStandardStacks]:Q,[H.specialFeatureOptins]:X,[H.purposeConsents]:X,[H.purposeLegitimateInterests]:X,[H.purposeOneTreatment]:Q,[H.publisherCountryCode]:Z,[H.vendorConsents]:te,[H.vendorLegitimateInterests]:te,[H.publisherRestrictions]:ee,segmentType:K,[H.vendorsDisclosed]:te,[H.vendorsAllowed]:te,[H.publisherConsents]:X,[H.publisherLegitimateInterests]:X,[H.numCustomPurposes]:K,[H.publisherCustomConsents]:X,[H.publisherCustomLegitimateInterests]:X}}class re{1={[r.CORE]:[H.version,H.created,H.lastUpdated,H.cmpId,H.cmpVersion,H.consentScreen,H.consentLanguage,H.vendorListVersion,H.purposeConsents,H.vendorConsents]};2={[r.CORE]:[H.version,H.created,H.lastUpdated,H.cmpId,H.cmpVersion,H.consentScreen,H.consentLanguage,H.vendorListVersion,H.policyVersion,H.isServiceSpecific,H.useNonStandardStacks,H.specialFeatureOptins,H.purposeConsents,H.purposeLegitimateInterests,H.purposeOneTreatment,H.publisherCountryCode,H.vendorConsents,H.vendorLegitimateInterests,H.publisherRestrictions],[r.PUBLISHER_TC]:[H.publisherConsents,H.publisherLegitimateInterests,H.numCustomPurposes,H.publisherCustomConsents,H.publisherCustomLegitimateInterests],[r.VENDORS_ALLOWED]:[H.vendorsAllowed],[r.VENDORS_DISCLOSED]:[H.vendorsDisclosed]}}class ne{1=[r.CORE];2=[r.CORE];constructor(e,t){if(2===e.version)if(e.isServiceSpecific)this[2].push(r.PUBLISHER_TC);else{const o=!(!t||!t.isForVendors);o&&!0!==e[H.supportOOB]||this[2].push(r.VENDORS_DISCLOSED),o&&(e[H.supportOOB]&&e[H.vendorsAllowed].size>0&&this[2].push(r.VENDORS_ALLOWED),this[2].push(r.PUBLISHER_TC))}}}class ie{static fieldSequence=new re;static encode(e,t){let o;try{o=this.fieldSequence[String(e.version)][t]}catch(o){throw new x(`Unable to encode version: ${e.version}, segment: ${t}`)}let n="";t!==r.CORE&&(n=K.encode(J.KEY_TO_ID[t],$.segmentType));const i=oe();return o.forEach(o=>{const r=e[o],s=i[o];let a=$[o];void 0===a&&this.isPublisherCustom(o)&&(a=Number(e[H.numCustomPurposes]));try{n+=s.encode(r,a)}catch(e){throw new x(`Error encoding ${t}->${o}: ${e.message}`)}}),U.encode(n)}static decode(e,t,o){const n=U.decode(e);let i=0;o===r.CORE&&(t.version=K.decode(n.substr(i,$[H.version]),$[H.version])),o!==r.CORE&&(i+=$.segmentType);const s=this.fieldSequence[String(t.version)][o],a=oe();return s.forEach(e=>{const o=a[e];let r=$[e];if(void 0===r&&this.isPublisherCustom(e)&&(r=Number(t[H.numCustomPurposes])),0!==r){const s=n.substr(i,r);if(t[e]=o===te?o.decode(s,t.version):o.decode(s,r),Number.isInteger(r))i+=r;else{if(!Number.isInteger(t[e].bitLength))throw new V(e);i+=t[e].bitLength}}}),t}static isPublisherCustom(e){return 0===e.indexOf("publisherCustom")}}class se{static processor=[e=>e,(e,o)=>{e.publisherRestrictions.gvl=o,e.purposeLegitimateInterests.unset(1);const r=new Map;return r.set("legIntPurposes",e.vendorLegitimateInterests),r.set("purposes",e.vendorConsents),r.forEach((r,n)=>{r.forEach((i,s)=>{if(i){const i=o.vendors[s];if(!i||i.deletedDate)r.unset(s);else if(0===i[n].length)if("legIntPurposes"===n&&0===i.purposes.length&&0===i.legIntPurposes.length&&i.specialPurposes.length>0);else if(e.isServiceSpecific)if(0===i.flexiblePurposes.length)r.unset(s);else{const o=e.publisherRestrictions.getRestrictions(s);let i=!1;for(let e=0,r=o.length;e<r&&!i;e++)i=o[e].restrictionType===t.REQUIRE_CONSENT&&"purposes"===n||o[e].restrictionType===t.REQUIRE_LI&&"legIntPurposes"===n;i||r.unset(s)}else r.unset(s)}})}),e.vendorsDisclosed.set(o.vendors),e}];static process(e,t){const o=e.gvl;if(!o)throw new x("Unable to encode TCModel without a GVL");if(!o.isReady)throw new x("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=o.language.toUpperCase(),t?.version>0&&t?.version<=this.processor.length?e.version=t.version:e.version=this.processor.length;const r=e.version-1;if(!this.processor[r])throw new x(`Invalid version: ${e.version}`);return this.processor[r](e,o)}}class ae{static absCall(e,t,o,r){return new Promise((n,i)=>{const s=new XMLHttpRequest;s.withCredentials=o,s.addEventListener("load",()=>{if(s.readyState==XMLHttpRequest.DONE)if(s.status>=200&&s.status<300){let e=s.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}n(e)}else i(new Error(`HTTP Status: ${s.status} response type: ${s.responseType}`))}),s.addEventListener("error",()=>{i(new Error("error"))}),s.addEventListener("abort",()=>{i(new Error("aborted"))}),null===t?s.open("GET",e,!0):s.open("POST",e,!0),s.responseType="json",s.timeout=r,s.ontimeout=()=>{i(new Error("Timeout "+r+"ms "+e))},s.send(t)})}static post(e,t,o=!1,r=0){return this.absCall(e,JSON.stringify(t),o,r)}static fetch(e,t=!1,o=0){return this.absCall(e,null,t,o)}}class ce extends B{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new M;static baseUrl_;static set baseUrl(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new R("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;lang_;isLatest=!1;constructor(e){super();let t=ce.baseUrl;if(this.lang_=ce.DEFAULT_LANGUAGE,this.isVendorList(e))this.populate(e),this.readyPromise=Promise.resolve();else{if(!t)throw new R("must specify GVL.baseUrl before loading GVL json");if(e>0){const o=e;ce.CACHE.has(o)?(this.populate(ce.CACHE.get(o)),this.readyPromise=Promise.resolve()):(t+=ce.versionedFilename.replace("[VERSION]",String(o)),this.readyPromise=this.fetchJson(t))}else ce.CACHE.has(ce.LATEST_CACHE_KEY)?(this.populate(ce.CACHE.get(ce.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(t+ce.latestFilename))}}static emptyLanguageCache(e){let t=!1;return void 0===e&&ce.LANGUAGE_CACHE.size>0?(ce.LANGUAGE_CACHE=new Map,t=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(ce.LANGUAGE_CACHE.delete(e.toUpperCase()),t=!0),t}static emptyCache(e){let t=!1;return Number.isInteger(e)&&e>=0?(ce.CACHE.delete(e),t=!0):void 0===e&&(ce.CACHE=new Map,t=!0),t}cacheLanguage(){ce.LANGUAGE_CACHE.has(this.lang_)||ce.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(e){try{this.populate(await ae.fetch(e))}catch(e){throw new R(e.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(e){const t=e.toUpperCase();if(!ce.consentLanguages.has(t))throw new R(`unsupported language ${e}`);if(t!==this.lang_)if(this.lang_=t,ce.LANGUAGE_CACHE.has(t)){const e=ce.LANGUAGE_CACHE.get(t);for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}else{const t=ce.baseUrl+ce.languageFilename.replace("[LANG]",e);try{await this.fetchJson(t),this.cacheLanguage()}catch(e){throw new R("unable to load language: "+e.message)}}}get language(){return this.lang_}isVendorList(e){return void 0!==e&&void 0!==e.vendors}populate(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&ce.CACHE.set(ce.LATEST_CACHE_KEY,this.getJson()),ce.CACHE.has(this.vendorListVersion)||ce.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(e){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(e=>{this.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(e=>{this.bySpecialPurposeVendorMap[e]=new Set}),Object.keys(this.features).forEach(e=>{this.byFeatureVendorMap[e]=new Set}),Object.keys(this.specialFeatures).forEach(e=>{this.bySpecialFeatureVendorMap[e]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(e=>+e)),this.vendorIds=new Set(e),this.vendors_=e.reduce((e,t)=>{const o=this.vendors_[String(t)];return o&&void 0===o.deletedDate&&(o.purposes.forEach(e=>{this.byPurposeVendorMap[String(e)].consent.add(t)}),o.specialPurposes.forEach(e=>{this.bySpecialPurposeVendorMap[String(e)].add(t)}),o.legIntPurposes.forEach(e=>{this.byPurposeVendorMap[String(e)].legInt.add(t)}),o.flexiblePurposes&&o.flexiblePurposes.forEach(e=>{this.byPurposeVendorMap[String(e)].flexible.add(t)}),o.features.forEach(e=>{this.byFeatureVendorMap[String(e)].add(t)}),o.specialFeatures.forEach(e=>{this.bySpecialFeatureVendorMap[String(e)].add(t)}),e[t]=o),e},{})}getFilteredVendors(e,t,o,r){const n=e.charAt(0).toUpperCase()+e.slice(1);let i;const s={};return i="purpose"===e&&o?this["by"+n+"VendorMap"][String(t)][o]:this["by"+(r?"Special":"")+n+"VendorMap"][String(t)],i.forEach(e=>{s[String(e)]=this.vendors[String(e)]}),s}getVendorsWithConsentPurpose(e){return this.getFilteredVendors("purpose",e,"consent")}getVendorsWithLegIntPurpose(e){return this.getFilteredVendors("purpose",e,"legInt")}getVendorsWithFlexiblePurpose(e){return this.getFilteredVendors("purpose",e,"flexible")}getVendorsWithSpecialPurpose(e){return this.getFilteredVendors("purpose",e,void 0,!0)}getVendorsWithFeature(e){return this.getFilteredVendors("feature",e)}getVendorsWithSpecialFeature(e){return this.getFilteredVendors("feature",e,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(e){this.mapVendors(e)}get isReady(){return this.isReady_}clone(){const e=new ce(this.getJson());return this.lang_!==ce.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}static isInstanceOf(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo}}class de extends B{static consentLanguages=ce.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardStacks_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=2;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new q;purposeConsents=new q;purposeLegitimateInterests=new q;publisherConsents=new q;publisherLegitimateInterests=new q;publisherCustomConsents=new q;publisherCustomLegitimateInterests=new q;customPurposes;vendorConsents=new q;vendorLegitimateInterests=new q;vendorsDisclosed=new q;vendorsAllowed=new q;publisherRestrictions=new W;constructor(e){super(),e&&(this.gvl=e),this.updated()}set gvl(e){ce.isInstanceOf(e)||(e=new ce(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}get gvl(){return this.gvl_}set cmpId(e){if(e=Number(e),!(Number.isInteger(e)&&e>1))throw new j("cmpId",e);this.cmpId_=e}get cmpId(){return this.cmpId_}set cmpVersion(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new j("cmpVersion",e);this.cmpVersion_=e}get cmpVersion(){return this.cmpVersion_}set consentScreen(e){if(e=Number(e),!(Number.isInteger(e)&&e>-1))throw new j("consentScreen",e);this.consentScreen_=e}get consentScreen(){return this.consentScreen_}set consentLanguage(e){this.consentLanguage_=e}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(e){if(!/^([A-z]){2}$/.test(e))throw new j("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(e){if((e=0|Number(e))<0)throw new j("vendorListVersion",e);this.vendorListVersion_=e}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new j("policyVersion",e)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(e){this.version_=parseInt(e,10)}get version(){return this.version_}set isServiceSpecific(e){this.isServiceSpecific_=e}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardStacks(e){this.useNonStandardStacks_=e}get useNonStandardStacks(){return this.useNonStandardStacks_}set supportOOB(e){this.supportOOB_=e}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(e){this.purposeOneTreatment_=e}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let e=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const t=Object.keys(this.customPurposes).sort((e,t)=>Number(e)-Number(t));e=parseInt(t.pop(),10)}return e}set numCustomPurposes(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new j("numCustomPurposes",e)}updated(){const e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=t,this.lastUpdated=t}}class le{static encode(e,t){let o,r="";return e=se.process(e,t),o=Array.isArray(t?.segments)?t.segments:new ne(e,t)[""+e.version],o.forEach((t,n)=>{let i="";n<o.length-1&&(i="."),r+=ie.encode(e,t)+i}),r}static decode(e,t){const o=e.split("."),r=o.length;t||(t=new de);for(let e=0;e<r;e++){const r=o[e],n=U.decode(r.charAt(0)).substr(0,$.segmentType),i=J.ID_TO_KEY[K.decode(n,$.segmentType).toString()];ie.decode(r,t,i)}return t}}function ue(){var e,t,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function i(o,r,n,i){var c=r&&r.prototype instanceof a?r:a,d=Object.create(c.prototype);return pe(d,"_invoke",function(o,r,n){var i,a,c,d=0,l=n||[],u=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,o){return i=t,a=0,c=e,p.n=o,s}};function h(o,r){for(a=o,c=r,t=0;!u&&d&&!n&&t<l.length;t++){var n,i=l[t],h=p.p,v=i[2];o>3?(n=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=h&&((n=o<2&&h<i[1])?(a=0,p.v=r,p.n=i[1]):h<v&&(n=o<3||i[0]>r||r>v)&&(i[4]=o,i[5]=r,p.n=v,a=0))}if(n||o>1)return s;throw u=!0,r}return function(n,l,v){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&h(l,v),a=l,c=v;(t=a<2?e:c)||!u;){i||(a?a<3?(a>1&&(p.n=-1),h(a,c)):p.n=c:p.v=c);try{if(d=2,i){if(a||(n="next"),t=i[n]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),a=1);i=e}else if((t=(u=p.n<0)?c:o.call(r,p))!==s)break}catch(t){i=e,a=1,c=t}finally{d=1}}return{value:t,done:u}}}(o,n,i),!0),d}var s={};function a(){}function c(){}function d(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(pe(t={},r,function(){return this}),t),u=d.prototype=a.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,pe(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,pe(u,"constructor",d),pe(d,"constructor",c),c.displayName="GeneratorFunction",pe(d,n,"GeneratorFunction"),pe(u),pe(u,n,"Generator"),pe(u,r,function(){return this}),pe(u,"toString",function(){return"[object Generator]"}),(ue=function(){return{w:i,m:p}})()}function pe(e,t,o,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}pe=function(e,t,o,r){function i(t,o){pe(e,t,function(e){return this._invoke(t,o,e)})}t?n?n(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},pe(e,t,o,r)}function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ve(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=me(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==o.return||o.return()}finally{if(a)throw i}}}}function me(e,t){if(e){if("string"==typeof e)return ge(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}function be(e,t,o,r,n,i,s){try{var a=e[i](s),c=a.value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(r,n)}function ye(e){return function(){var t=this,o=arguments;return new Promise(function(r,n){var i=e.apply(t,o);function s(e){be(i,r,n,s,a,"next",e)}function a(e){be(i,r,n,s,a,"throw",e)}s(void 0)})}}function Ae(){return Ce.apply(this,arguments)}function Ce(){return(Ce=ye(ue().m(function e(){return ue().w(function(e){for(;;)switch(e.n){case 0:S(),Ee(),Ie(),we(),Se(),Le();case 1:return e.a(2)}},e)}))).apply(this,arguments)}function Ee(){i.overlayFrame=window.document.createElement("iframe"),i.overlayFrame.classList.add("adagio-overlay"),i.overlayFrame.style.position="fixed",i.overlayFrame.style.top="10px",i.overlayFrame.style.left="10px",i.overlayFrame.style.width="1000px",i.overlayFrame.style.height="95%",i.overlayFrame.style.zIndex="2147483647",i.overlayFrame.style.backgroundColor="transparent",i.overlayFrame.style.border="none",i.overlayFrame.style.borderRadius="10px",i.overlayFrame.style.boxShadow="rgba(0, 0, 0, 0.35) 0px 5px 15px",i.overlayFrame.style.resize="both",i.overlayFrame.style.display="block",window.document.body.appendChild(i.overlayFrame),i.overlayFrameDoc=i.overlayFrame.contentDocument||i.overlayFrame.contentWindow.document}function Ie(){var e=i.overlayFrameDoc.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","https://cdn.jsdelivr.net/npm/@picocss/pico@1.5.7/css/pico.min.css");var t=function(){var e=i.overlayFrameDoc.createElement("nav");return e.classList.add("container-fluid"),e.setAttribute("id","adagio-nav"),e.style.zIndex="99",e.style.position="fixed",e.style.top="0",e.style.right="0",e.style.left="0",e.style.padding="0 var(--spacing)",e.style.backgroundColor="var(--card-background-color)",e.style.boxShadow="var(--card-box-shadow)",e}();t.appendChild(function(){var e=i.overlayFrameDoc.createElement("ul"),t=i.overlayFrameDoc.createElement("li"),o=i.overlayFrameDoc.createElement("a");return o.setAttribute("href","https://app.adagio.io/"),o.setAttribute("target","_blank"),o.innerHTML=d.logo,t.appendChild(o),e.appendChild(t),e}());var o,r,n,a=i.overlayFrameDoc.createElement("ul");a.appendChild(ke(l.checker,d.checker,!0)),a.appendChild(ke(l.adunits,d.adunits,!1)),a.appendChild((o=d.api_grey,r=i.overlayFrameDoc.createElement("li"),(n=i.overlayFrameDoc.createElement("button")).setAttribute("id","apiButton"),n.setAttribute("title","API status"),n.innerHTML=o,n.classList.add("outline"),n.style.borderColor="transparent",n.style.padding="0.3em",r.appendChild(n),r)),a.appendChild(function(e,t){var o=s.prebidWrappers.length,r=i.overlayFrameDoc.createElement("li"),n=i.overlayFrameDoc.createElement("button");n.setAttribute("title","Prebid versions detected"),0!==o||(n.disabled=!0),n.innerHTML=t,n.addEventListener("click",function(){c.adagioPbjsAdUnitsCode.forEach(function(e){for(var t in e.bids){var o=e.bids[t].params.adUnitElementId,r=window.document.getElementById(o),n=window.document.createElement("div");n.style.backgroundColor="rgba(0, 0, 0, 0.5)",r.parentNode.insertBefore(n,r),n.appendChild(r)}})}),n.classList.add("outline"),n.style.borderColor="transparent",n.style.position="relative",n.style.display="inline-block",n.style.padding="0.3em";var a=i.overlayFrameDoc.createElement("span");a.style.position="absolute",a.style.top="-10px",a.style.right="-10px",a.style.padding="0.5em 0.9em",a.style.borderRadius="50%",a.style.fontSize="0.6em",a.style.background=u.red_bkg,a.style.color=u.red_txt,a.innerHTML=o,o<2&&(a.style.display="none");var d=i.overlayFrameDoc.createElement("dialog");d.setAttribute("open",!1);var l=i.overlayFrameDoc.createElement("article"),p=i.overlayFrameDoc.createElement("header"),h=i.overlayFrameDoc.createElement("a");h.setAttribute("aria-label","Close"),h.classList.add("close"),p.innerHTML="Prebid wrappers detected";var v=i.overlayFrameDoc.createElement("p");h.addEventListener("click",function(){d.setAttribute("open",!1)}),n.addEventListener("click",function(){d.setAttribute("open",!0)}),r.appendChild(n),n.appendChild(a),i.overlayFrameDoc.body.appendChild(d),d.appendChild(l),l.appendChild(p),p.appendChild(h),l.appendChild(v);for(var f=function(){var e=s.prebidWrappers[m],t=i.overlayFrameDoc.createElement("div"),o=i.overlayFrameDoc.createElement("input");o.setAttribute("type","radio"),o.setAttribute("value",m),o.setAttribute("name","radio-group");var r=i.overlayFrameDoc.createElement("label");r.setAttribute("for",m),r.innerHTML=e[0],s.prebidWrappers[m][1]!==window&&(r.innerHTML+=" (iframe)"),s.prebidWrapper[0]===e[0]&&Object.is(s.prebidWrapper[1],e[1])&&(o.checked=!0),o.addEventListener("click",function(){o.checked&&(s.prebidWrapper=s.prebidWrappers[o.value],s.prebidObject=s.prebidWrapper[1][s.prebidWrapper[0]],_e())}),v.appendChild(t),t.appendChild(o),t.appendChild(r)},m=0;m<o;m++)f();return r}(0,d.prebid)),a.appendChild(function(e,t){var o=i.overlayFrameDoc.createElement("li"),r=i.overlayFrameDoc.createElement("button");return r.setAttribute("title","Enable debbug mode and reload page"),r.innerHTML=t,r.addEventListener("click",function(){return function(){window.localStorage.setItem("ADAGIO_DEV_DEBUG",!0);var e=window.location.href.indexOf("?pbjs_debug=true")?window.location.href+"?pbjs_debug=true":window.location.href;window.location.href=e}()}),r.classList.add("outline"),r.style.borderColor="transparent",r.style.padding="0.3em",o.appendChild(r),o}(0,d.debbuging)),a.appendChild(function(e,t){var o=i.overlayFrameDoc.createElement("li"),r=i.overlayFrameDoc.createElement("button");return r.setAttribute("title","Refresh"),r.innerHTML=t,r.addEventListener("click",function(){return _e()}),r.classList.add("outline"),r.style.borderColor="transparent",r.style.padding="0.3em",o.appendChild(r),o}(0,d.refresh)),t.appendChild(a),i.overlayFrameDoc.head.appendChild(e),i.overlayFrameDoc.body.appendChild(t)}function we(){var e=l.checker.toLowerCase().replace(" ","-"),t=i.overlayFrameDoc.createElement("main");t.classList.add("container-fluid"),t.setAttribute("id","".concat(e,"-container")),t.style.paddingTop="5rem",t.style.paddingBottom="0";var o=i.overlayFrameDoc.createElement("div");o.classList.add("headings");var r=i.overlayFrameDoc.createElement("h2");r.textContent="Integration checker";var n=i.overlayFrameDoc.createElement("h3");n.textContent="Expectations for a proper Adagio integration",o.appendChild(r),o.appendChild(n);var s=i.overlayFrameDoc.createElement("article");s.style.padding="1em",s.style.marginLeft="",s.style.marginRight="",s.style.marginTop="1em",s.style.marginBottom="1em",s.style.color=u.yellow_txt,s.style.backgroundColor=u.yellow_bkg;var a=i.overlayFrameDoc.createElement("div");a.setAttribute("id","".concat(e,"-alert")),s.appendChild(a);var c=i.overlayFrameDoc.createElement("table"),d=i.overlayFrameDoc.createElement("thead"),p=i.overlayFrameDoc.createElement("tr"),h=i.overlayFrameDoc.createElement("th");h.setAttribute("scope","col"),h.textContent="Status";var v=i.overlayFrameDoc.createElement("th");v.setAttribute("scope","col"),v.textContent="Name";var f=i.overlayFrameDoc.createElement("th");f.setAttribute("scope","col"),f.textContent="Details",p.appendChild(h),p.appendChild(v),p.appendChild(f),d.appendChild(p);var m=i.overlayFrameDoc.createElement("tbody");m.setAttribute("id","".concat(e,"-tbody")),c.appendChild(d),c.appendChild(m),t.appendChild(o),t.appendChild(s),t.appendChild(c),i.overlayFrameDoc.body.appendChild(t)}function Se(){var e=l.adunits.toLowerCase().replace(" ","-"),t=i.overlayFrameDoc.createElement("main");t.classList.add("container-fluid"),t.setAttribute("id","".concat(e,"-container")),t.style.display="none",t.style.paddingTop="5rem",t.style.paddingBottom="0";var o=i.overlayFrameDoc.createElement("div");o.classList.add("headings");var r=i.overlayFrameDoc.createElement("h2");r.textContent="AdUnits";var n=i.overlayFrameDoc.createElement("h3");n.textContent="Bid requested for each adUnit and by bidders",o.appendChild(r),o.appendChild(n);var s=i.overlayFrameDoc.createElement("article");s.style.padding="1em",s.style.marginLeft="",s.style.marginRight="",s.style.marginTop="1em",s.style.marginBottom="1em",s.style.color=u.yellow_txt,s.style.backgroundColor=u.yellow_bkg;var a=i.overlayFrameDoc.createElement("div");a.setAttribute("id","".concat(e,"-alert")),s.appendChild(a);var c=i.overlayFrameDoc.createElement("details");c.setAttribute("role","list");var d=i.overlayFrameDoc.createElement("summary");d.setAttribute("aria-haspopup","listbox"),d.textContent="Filter requested bids by bidders";var p=i.overlayFrameDoc.createElement("ul");p.setAttribute("role","listbox"),p.setAttribute("id","bidderFilter"),c.appendChild(d),c.appendChild(p);var h=i.overlayFrameDoc.createElement("table"),v=i.overlayFrameDoc.createElement("thead"),f=i.overlayFrameDoc.createElement("tr"),m=i.overlayFrameDoc.createElement("th");m.setAttribute("scope","col"),m.textContent="Status";var g=i.overlayFrameDoc.createElement("th");g.setAttribute("scope","col"),g.textContent="Code";var b=i.overlayFrameDoc.createElement("th");b.setAttribute("scope","col"),b.textContent="Mediatypes";var y=i.overlayFrameDoc.createElement("th");y.setAttribute("scope","col"),y.textContent="🔎 Bidder params",f.appendChild(m),f.appendChild(g),f.appendChild(b),f.appendChild(y),v.appendChild(f);var A=i.overlayFrameDoc.createElement("tbody");A.setAttribute("id","".concat(e,"-tbody")),h.appendChild(v),h.appendChild(A),t.appendChild(o),t.appendChild(s),t.appendChild(c),t.appendChild(h),i.overlayFrameDoc.body.appendChild(t)}function Le(){var e=i.overlayFrameDoc.getElementById("adagio-nav"),t=void 0,o=0,r=0;function n(){i.isDragged=!1,e.style.cursor="grab",i.overlayFrame.style.opacity=""}e.addEventListener("mousedown",function(n){"NAV"!==(t=n.target.tagName)&&"UL"!==t&&"LI"!==t||(i.isDragged=!0,e.style.cursor="grabbing",i.overlayFrame.style.opacity="0.4",o=n.clientX,r=n.clientY)}),e.addEventListener("mouseup",n),e.addEventListener("mouseover",function(o){"NAV"===(t=o.target.tagName)||"UL"===t||"LI"===t?e.style.cursor="grab":e.style.cursor="default"}),i.overlayFrame.addEventListener("mouseup",n),i.overlayFrameDoc.addEventListener("mousemove",function(e){if(i.isDragged){var t=e.clientX-o,n=e.clientY-r,s=i.overlayFrame.getBoundingClientRect(),a=s.left,c=s.top;i.overlayFrame.style.left=a+t+"px",i.overlayFrame.style.top=c+n+"px"}})}function Oe(e,t,o){var r=l.checker.toLowerCase().replace(" ","-"),n=i.overlayFrameDoc.getElementById("".concat(r,"-tbody")),s=i.overlayFrameDoc.createElement("tr"),a=i.overlayFrameDoc.createElement("td"),c=i.overlayFrameDoc.createElement("td"),d=i.overlayFrameDoc.createElement("td");a.innerHTML=e,c.innerHTML=t,d.innerHTML=o,n.appendChild(s),s.appendChild(a),s.appendChild(c),s.appendChild(d)}function ke(e,t,o){var r=e.toLowerCase().replace(" ","-"),n=i.overlayFrameDoc.createElement("li"),s=i.overlayFrameDoc.createElement("button");return s.setAttribute("id","".concat(r,"-button")),s.innerHTML=t,s.innerHTML+=" ".concat(e," "),s.addEventListener("click",function(){return function(e){if(e!==i.activeTab){i.overlayFrameDoc.body.scrollTop=0;var t=i.overlayFrameDoc.getElementById("".concat(i.activeTab,"-button")),o=i.overlayFrameDoc.getElementById("".concat(i.activeTab,"-container")),r=i.overlayFrameDoc.getElementById("".concat(e,"-button")),n=i.overlayFrameDoc.getElementById("".concat(e,"-container"));r.classList.remove("outline"),t.classList.add("outline"),n.style.display="",o.style.display="none",i.activeTab=e}}(r)}),o?i.activeTab=r:s.classList.add("outline"),s.style.padding="0.3em",s.style.textTransform="uppercase",s.style.fontSize="0.85em",n.appendChild(s),n}function Te(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var r in e)if(e.hasOwnProperty(r)){var n=[].concat(ve(o),[r]);if(r===t)return{path:n.join("."),value:e[r]};if("object"===he(e[r])&&null!==e[r]){var i=Te(e[r],t,n);if(i)return i}}return null}function De(e,t,o,r){var n=i.overlayFrameDoc.createElement("tr"),s=i.overlayFrameDoc.createElement("td"),a=i.overlayFrameDoc.createElement("td"),c=i.overlayFrameDoc.createElement("td");s.innerHTML=t,a.innerHTML=o,c.innerHTML=r,e.appendChild(n),n.appendChild(s),n.appendChild(a),n.appendChild(c)}function _e(){return Fe.apply(this,arguments)}function Fe(){return(Fe=ye(ue().m(function e(){var t;return ue().w(function(e){for(;;)switch(e.n){case 0:return(t=document.getElementById("adagio-overlay-frame"))&&t.remove(),e.n=1,ct();case 1:return e.a(2)}},e)}))).apply(this,arguments)}function Pe(){var e,t,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function i(o,r,n,i){var c=r&&r.prototype instanceof a?r:a,d=Object.create(c.prototype);return Ne(d,"_invoke",function(o,r,n){var i,a,c,d=0,l=n||[],u=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,o){return i=t,a=0,c=e,p.n=o,s}};function h(o,r){for(a=o,c=r,t=0;!u&&d&&!n&&t<l.length;t++){var n,i=l[t],h=p.p,v=i[2];o>3?(n=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=h&&((n=o<2&&h<i[1])?(a=0,p.v=r,p.n=i[1]):h<v&&(n=o<3||i[0]>r||r>v)&&(i[4]=o,i[5]=r,p.n=v,a=0))}if(n||o>1)return s;throw u=!0,r}return function(n,l,v){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&h(l,v),a=l,c=v;(t=a<2?e:c)||!u;){i||(a?a<3?(a>1&&(p.n=-1),h(a,c)):p.n=c:p.v=c);try{if(d=2,i){if(a||(n="next"),t=i[n]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),a=1);i=e}else if((t=(u=p.n<0)?c:o.call(r,p))!==s)break}catch(t){i=e,a=1,c=t}finally{d=1}}return{value:t,done:u}}}(o,n,i),!0),d}var s={};function a(){}function c(){}function d(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(Ne(t={},r,function(){return this}),t),u=d.prototype=a.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,Ne(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,Ne(u,"constructor",d),Ne(d,"constructor",c),c.displayName="GeneratorFunction",Ne(d,n,"GeneratorFunction"),Ne(u),Ne(u,n,"Generator"),Ne(u,r,function(){return this}),Ne(u,"toString",function(){return"[object Generator]"}),(Pe=function(){return{w:i,m:p}})()}function Ne(e,t,o,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}Ne=function(e,t,o,r){function i(t,o){Ne(e,t,function(e){return this._invoke(t,o,e)})}t?n?n(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},Ne(e,t,o,r)}function Ve(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,i,s,a=[],c=!0,d=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(r=i.call(o)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=o.return&&(s=o.return(),Object(s)!==s))return}finally{if(d)throw n}}return a}}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=je(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==o.return||o.return()}finally{if(a)throw i}}}}function je(e,t){if(e){if("string"==typeof e)return Ue(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Ue(e,t):void 0}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}function Me(e,t,o,r,n,i,s){try{var a=e[i](s),c=a.value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(r,n)}function He(){return Be.apply(this,arguments)}function Be(){var e;return e=Pe().m(function e(){return Pe().w(function(e){for(;;)switch(e.n){case 0:return ze(),e.n=1,L();case 1:return e.n=2,D();case 2:return e.n=3,F();case 3:Ge(),We(),Je(),qe(),$e(),Ke(),Ye(),Qe(),Xe(),Ze(),et(),tt(),ot(),rt();case 4:return e.a(2)}},e)}),Be=function(){var t=this,o=arguments;return new Promise(function(r,n){var i=e.apply(t,o);function s(e){Me(i,r,n,s,a,"next",e)}function a(e){Me(i,r,n,s,a,"throw",e)}s(void 0)})},Be.apply(this,arguments)}function Ge(){var e,t,o,r=new Map;r.set("Google Ad Manager","function"==typeof(null===(e=window)||void 0===e||null===(e=e.googletag)||void 0===e?void 0:e.pubads)),r.set("Smart AdServer","function"==typeof(null===(t=window)||void 0===t||null===(t=t.sas)||void 0===t||null===(t=t.events)||void 0===t?void 0:t.on)),r.set("Appnexus","function"==typeof(null===(o=window)||void 0===o||null===(o=o.apntag)||void 0===o?void 0:o.onEvent));var n,i="",s=Re(r);try{for(s.s();!(n=s.n()).done;){var a=xe(n.value,2),c=a[0];0!=a[1]&&(i+=""===i?"<code>".concat(c,"</code>"):", <code>".concat(c,"</code>"))}}catch(e){s.e(e)}finally{s.f()}""===i?Oe(p.check,h.adserver,"No supported adserver: the viewability measurement may not work"):Oe(p.ok,h.adserver,"".concat(i))}function ze(){if(void 0!==s.prebidWrapper&&(c.prebidEvents=s.prebidObject.getEvents(),c.prebidBidsRequested=c.prebidEvents.filter(function(e){return"bidRequested"===e.eventType}).map(function(e){return e.args}),c.prebidBids=c.prebidBidsRequested.map(function(e){return e.bids}).flat(),c.prebidAdagioBidsRequested=c.prebidBids.filter(function(e){var t;return null===(t=e.bidder)||void 0===t||null===(t=t.toLowerCase())||void 0===t?void 0:t.includes("adagio")}),c.prebidAdagioParams=c.prebidAdagioBidsRequested.map(function(e){return e.params}),0!==c.prebidAdagioParams.length)){for(var e in c.organizationIds=[],c.prebidAdagioParams){var t,o=null===(t=c.prebidAdagioParams[e])||void 0===t?void 0:t.organizationId;void 0!==o&&(o=o.toString()),void 0===o||c.organizationIds.includes(o)||c.organizationIds.push(o)}for(var r in c.siteNames=[],c.prebidAdagioParams){var n,i=null===(n=c.prebidAdagioParams[r])||void 0===n?void 0:n.site;void 0===i||c.siteNames.includes(i)||c.siteNames.push(i)}}}function We(){s.prebidVersionDetected=void 0,void 0===s.prebidWrapper?Oe(p.ko,h.prebid,"<code>window._pbjsGlobals</code>: <code>undefined</code>"):(s.prebidVersionDetected=s.prebidObject.version.replace("v","").split("-")[0].split(".").slice(0,2).join("."),Oe(p.ok,h.prebid,"<code>window._pbjsGlobals</code>: <code>".concat(s.prebidWrapper[0]," (").concat(s.prebidObject.version,")</code>")))}function Je(){if(s.adagioAdapter=window.ADAGIO,void 0!==s.adagioAdapter){var e=s.adagioAdapter.pbjsAdUnits,t=s.adagioAdapter.versions.adagiojs,o=p.ok,r="• Adagiojs: <code>🟢 Version: ".concat(JSON.stringify(t),"</code><br>");void 0===t&&(r="• Adagiojs: <code>🔴 Failed: Script not loaded.</code><br>",o=p.check);var n="• Wrapper integrity: <code>🟢 Successed</code>",i="".concat(s.prebidWrapper[0],"AdUnits");void 0===e||!Array.isArray(e)||0===e.length&&void 0!==s.adagioAdapter["".concat(s.prebidWrapper[0],"AdUnits")]&&"pbjs"!==s.prebidWrapper[0]?(n="• Wrapper integrity: <code>🔴 Failed: Viewability / Analytics won't work.</code>",o=p.check):void 0!==s.adagioAdapter[i]&&"pbjs"!==s.prebidWrapper[0]&&(n="• Wrapper integrity: <code>🟠 Fixed: Try to contact client for bad behavior.</code>"),Oe(o,h.adapter,r+n)}else Oe(p.ko,h.adapter,"<code>window.ADAGIO</code>: <code>".concat(window.ADAGIO,"</code>"))}function qe(){if(void 0===s.prebidObject)Oe(p.ko,h.adunits,v.prebidnotfound);else{if(c.prebidBidsRequested=c.prebidEvents.filter(function(e){return"bidRequested"===e.eventType}).map(function(e){return e.args}),c.prebidBidders=Ve(new Set(c.prebidBidsRequested.map(function(e){return e.bidderCode}))).sort(),c.prebidBids=c.prebidBidsRequested.map(function(e){return e.bids}).flat(),c.prebidAdagioBidsRequested=c.prebidBids.filter(function(e){var t;return null===(t=e.bidder)||void 0===t||null===(t=t.toLowerCase())||void 0===t?void 0:t.includes("adagio")}),c.prebidAdagioParams=c.prebidAdagioBidsRequested.map(function(e){return e.params}),0!==c.prebidAdagioParams.length)for(var e in c.prebidAdagioParams){var t,o=null===(t=c.prebidAdagioParams[e])||void 0===t?void 0:t.organizationId;c.organizationIds.includes(o)||c.organizationIds.push(o)}c.prebidAdUnitsCodes=new Set;var r,n,d,f=Re(c.prebidBidsRequested.map(function(e){return e.bids}));try{for(f.s();!(r=f.n()).done;){var m,g=Re(r.value);try{for(g.s();!(m=g.n()).done;){var b=m.value;c.prebidAdUnitsCodes.add(b.adUnitCode)}}catch(e){g.e(e)}finally{g.f()}}}catch(e){f.e(e)}finally{f.f()}c.prebidAdagioAdUnitsCodes=Ve(new Set(c.prebidAdagioBidsRequested.map(function(e){return e.adUnitCode}))),c.adagioPbjsAdUnitsCode=[],void 0!==s.adagioAdapter&&(null===(n=s.adagioAdapter)||void 0===n||n.adUnits,c.adagioPbjsAdUnitsCode=null===(d=s.adagioAdapter)||void 0===d||null===(d=d.pbjsAdUnits)||void 0===d?void 0:d.map(function(e){return e.code}),void 0===c.adagioPbjsAdUnitsCode&&(c.adagioPbjsAdUnitsCode=[])),c.totalPrebidAdUnitsCodes=c.prebidAdUnitsCodes.size,c.totalPrebidAdagioAdUnitsCode=c.prebidAdagioAdUnitsCodes.length;var y=function(e,t){var o="";c.prebidAdagioBidsRequested.length>0&&(o=c.prebidAdagioBidsRequested[0].bidder);var r=l.adunits.toLowerCase().replace(" ","-"),n=i.overlayFrameDoc.getElementById("".concat(r,"-tbody")),d=i.overlayFrameDoc.getElementById("".concat(r,"-alert"));if(d.innerHTML="<small>Adunit(s) found:</small> ",void 0!==c.prebidAdUnitsCodes&&c.totalPrebidAdUnitsCodes>0){var h,v=fe(c.prebidAdUnitsCodes);try{for(v.s();!(h=v.n()).done;){var f=h.value;d.innerHTML+="<small> <code>".concat(f,"</code>;</small>")}}catch(e){v.e(e)}finally{v.f()}}else d.innerHTML+="<small><kbd> 0</kbd></small>";var m=[];t.forEach(function(e){var t=e.adUnitCode,r=e.mediaTypes,c=e.bidder,d=c.toLowerCase().includes("adagio"),l=[];d&&function(e,t){var o,r,n,i,c,d,l,u,h,v,f,m,g,b=null==e||null===(o=e.params)||void 0===o?void 0:o.organizationId;void 0!==b&&(b=b.toString());var y=null==e||null===(r=e.params)||void 0===r?void 0:r.site,A=null==e||null===(n=e.params)||void 0===n?void 0:n.placement,C=null==e||null===(i=e.params)||void 0===i?void 0:i.adUnitElementId,E=null==e||null===(c=e.ortb2Imp)||void 0===c||null===(c=c.ext)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.placement,I=null==e||null===(d=e.ortb2Imp)||void 0===d||null===(d=d.ext)||void 0===d||null===(d=d.data)||void 0===d?void 0:d.divId,w=null==e||null===(l=e.ortb2)||void 0===l||null===(l=l.regs)||void 0===l||null===(l=l.ext)||void 0===l?void 0:l.gdpr,S=null==e||null===(u=e.ortb2)||void 0===u||null===(u=u.user)||void 0===u||null===(u=u.ext)||void 0===u?void 0:u.consent,L=null==e||null===(h=e.ortb2Imp)||void 0===h?void 0:h.instl,O=null==e||null===(v=e.ortb2Imp)||void 0===v?void 0:v.rwdd,k=Te(e,"instl")||null,T=Te(e,"rwdd")||null;void 0===b?t.push([p.ko,"<code>params.organizationId</code>: <code>".concat(b,"</code>"),"Parameter not found."]):"string"!=typeof b||/^\d{4}$/.test(b)?t.push([p.ok,"<code>params.organizationId</code>: <code>".concat(b,"</code>"),""]):t.push([p.check,"<code>params.organizationId</code>: <code>".concat(b,"</code>"),"Should be a 4-digit integer or string (e.g., 1000 or '1000')."]),void 0===y?t.push([p.ko,"<code>params.site</code>: <code>".concat(y,"</code>"),"Parameter not found."]):y.trim()!==y?t.push([p.ko,"<code>params.site</code>: <code>".concat(y,"</code>"),"Space character detected."]):a.apiKeyDetected&&null!==a.successRecordItems?t.push([p.ok,"<code>params.site</code>: <code>".concat(y,"</code>"),""]):a.apiKeyDetected&&null===a.successRecordItems?t.push([p.ko,"<code>params.site</code>: <code>".concat(y,"</code>"),"No API record found, check logs."]):t.push([p.info,"<code>params.site</code>: <code>".concat(y,"</code>"),"No API loaded for checking."]);var D="",_="",F="",P="";if(s.prebidVersionDetected>=9?void 0!==I?(D=p.ok,_="ortb2Imp.ext.data.divId",F=I,P=""):void 0!==C?(D=p.info,_="params.adUnitElementId",F=C,P="Recommendation: Setup the new divId param in ortb2Imp."):(D=p.check,_="ortb2Imp.ext.data.divId",F=void 0,P=""):void 0!==C?(D=p.ok,_="params.adUnitElementId",F=C,P=""):(D=p.check,_="params.adUnitElementId",F=void 0,P=""),void 0===F)t.push([D,"<code>".concat(_,"</code>: <code>").concat(F,"</code>"),"Not defined in the adUnit configuration."]);else{var N=document.getElementById(F);F.trim()!==F?t.push([p.check,"<code>".concat(_,"</code>: <code>").concat(F,"</code>"),"Space character detected."]):null===N?t.push([p.check,"<code>".concat(_,"</code>: <code>").concat(F,"</code>"),"Div id not found in the page."]):t.push([D,"<code>".concat(_,"</code>: <code>").concat(F,"</code>"),P])}var V="",x="",R="",j="";s.prebidVersionDetected>=10?void 0!==A?(V=p.ok,x="params.placement",R=A,j=""):void 0!==E?(V=p.info,x="ortb2Imp.ext.data.placement",R=E,j="Fallback: placement found in ortb2Imp, but should be in params.placement for Prebid 10+."):(V=p.ko,x="params.placement",R=void 0,j=""):s.prebidVersionDetected>=9?void 0!==E?(V=p.ok,x="ortb2Imp.ext.data.placement",R=E,j=""):void 0!==A?(V=p.info,x="params.placement",R=A,j="Fallback: placement found in params, but should be in ortb2Imp.ext.data.placement for Prebid 9.x."):(V=p.ko,x="ortb2Imp.ext.data.placement",R=void 0,j=""):void 0!==A?(V=p.ok,x="params.placement",R=A,j=""):(V=p.ko,x="params.placement",R=void 0,j=""),void 0===R?t.push([V,"<code>".concat(x,"</code>: <code>").concat(R,"</code>"),"Not defined in the adUnit configuration."]):R.trim()!==R?t.push([p.check,"<code>".concat(x,"</code>: <code>").concat(R,"</code>"),"Space character detected."]):/mobile/i.test(R)||/desktop/i.test(R)||/tablet/i.test(R)?t.push([p.check,"<code>".concat(x,"</code>: <code>").concat(R,"</code>"),"Should not include reference to an environment"]):t.push([V,"<code>".concat(x,"</code>: <code>").concat(R,"</code>"),j]);var U=null===(f=e.mediaTypes)||void 0===f?void 0:f.banner,M=null===(m=e.mediaTypes)||void 0===m?void 0:m.video,H=null===(g=e.mediaTypes)||void 0===g?void 0:g.native;if(void 0===U&&void 0===M&&void 0===H)t.push([p.ko,"<code>mediaTypes</code>: <code>".concat(JSON.stringify(e.mediaTypes),"</code>"),"No mediatype detected."]);else{if(void 0!==U){var B=null==U?void 0:U.sizes;if(void 0!==B){var G=[];[[120,600],[160,600],[250,250],[300,50],[300,100],[300,250],[300,300],[300,600],[320,50],[320,100],[320,160],[320,320],[320,480],[336,280],[728,90],[800,250],[930,180],[970,90],[970,250],[1800,1e3]].forEach(function(e){B.forEach(function(t){JSON.stringify(e)===JSON.stringify(t)&&G.push(e)})}),G.length>0?t.push([p.ok,"<code>mediaTypes.banner.sizes</code>: <code>".concat(JSON.stringify(G),"</code>"),""]):t.push([p.ko,"<code>mediaTypes.banner.sizes</code>: <code>".concat(JSON.stringify(B),"</code>"),"No supported size detected."])}else t.push([p.ko,"<code>mediaTypes.banner.sizes</code>: <code>".concat(JSON.stringify(B),"</code>"),"No parameter found."])}if(void 0!==M){var z=null==M?void 0:M.context,W=null==M?void 0:M.api,J=null==M?void 0:M.playerSize,q=null==M?void 0:M.mimes,$=(null==M?void 0:M.plcmt)||(null==M?void 0:M.placement),K=null==M?void 0:M.playbackmethod,Y=null==M?void 0:M.startdelay,Q=null==M?void 0:M.protocols,X="outstream"===z,Z="instream"===z,ee=[1,2,3,4,5],te=["video/mp4","video/ogg","video/webm","application/javascript"],oe=[3,6,7,8];if(!X&&!Z)return void t.push([p.ko,"<code>mediaTypes.video.context</code>: <code>".concat(z,"</code>"),"No supported context found."]);if(t.push([p.ok,"<code>mediaTypes.video.context</code>: <code>".concat(z,"</code>"),""]),void 0!==W?X&&!W.includes(2)?t.push([p.ko,"<code>mediaTypes.video.api</code>: <code>".concat(JSON.stringify(W),"</code>"),"Must support api <code>2</code>'"]):!ee.some(function(e){return W.includes(e)})&&Z?t.push([p.ko,"<code>mediaTypes.video.api</code>: <code>".concat(JSON.stringify(W),"</code>"),"Must support at least one of <code>".concat(JSON.stringify(ee),"</code>")]):t.push([p.ok,"<code>mediaTypes.video.api</code>: <code>".concat(JSON.stringify(W),"</code>"),""]):t.push([p.ko,"<code>mediaTypes.video.api</code>: <code>".concat(W,"</code>"),"No video api detected."]),J&&Array.isArray(J)&&J.every(function(e){return Array.isArray(e)&&2===e.length&&e.every(Number.isInteger)})?t.push([p.ok,"<code>mediaTypes.video.playerSize</code>: <code>".concat(JSON.stringify(J),"</code>"),""]):t.push([p.ko,"<code>mediaTypes.video.playerSize</code>: <code>".concat(JSON.stringify(J),"</code>"),"Wrong format or not size detected."]),Z&&(void 0===q?t.push([p.ko,"<code>mediaTypes.video.mimes</code>: <code>".concat(JSON.stringify(q),"</code>"),"No mimes detected."]):te.every(function(e){return q.includes(e)})?t.push([p.ok,"<code>mediaTypes.video.mimes</code>: <code>".concat(JSON.stringify(q),"</code>"),""]):t.push([p.check,"<code>mediaTypes.video.mimes</code>: <code>".concat(JSON.stringify(q),"</code>"),"Missing mimes: <code>".concat(JSON.stringify(te.filter(function(e){return!q.includes(e)})),"</code>")])),Z?void 0===$||1!==$?t.push([p.ko,"<code>mediaTypes.video.plcmt</code>: <code>".concat($,"</code>"),"Must be <code>".concat(JSON.stringify(1),'</code> for instream context (<a href="https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/main/AdCOM%20v1.0%20FINAL.md#list--plcmt-subtypes---video-" target="_blank">iab</a>).')]):t.push([p.ok,"<code>mediaTypes.video.plcmt</code>: <code>".concat($,"</code>"),""]):X&&(void 0===$||1===$?t.push([p.ko,"<code>mediaTypes.video.plcmt</code>: <code>".concat($,"</code>"),'Must be set for outstream context (<a href="https://github.com/InteractiveAdvertisingBureau/AdCOM/blob/main/AdCOM%20v1.0%20FINAL.md#list--plcmt-subtypes---video-" target="_blank">iab</a>).']):t.push([p.ok,"<code>mediaTypes.video.plcmt</code>: <code>".concat($,"</code>"),""])),void 0!==K){var re=Z?2:X?6:null;re&&!K.includes(re)?t.push([p.check,"<code>mediaTypes.video.playbackmethod</code>: <code>".concat(JSON.stringify(K),"</code>"),"Recommended playback method is: [".concat(re,"].")]):re?t.push([p.ok,"<code>mediaTypes.video.playbackmethod</code>: <code>".concat(JSON.stringify(K),"</code>"),""]):t.push([p.check,"<code>mediaTypes.video.playbackmethod</code>: <code>".concat(JSON.stringify(K),"</code>"),"No playback method detected or context not available."])}else t.push([p.check,"<code>mediaTypes.video.playbackmethod</code>: <code>".concat(JSON.stringify(K),"</code>"),"No playback method detected."]);Z&&(void 0!==Y?t.push([p.ok,"<code>mediaTypes.video.startdelay</code>: <code>".concat(Y,"</code>"),""]):t.push([p.check,"<code>mediaTypes.video.startdelay</code>: <code>".concat(Y,"</code>"),"No start delay detected."])),Z&&(void 0!==Q?oe.every(function(e){return Q.includes(e)})?t.push([p.ok,"<code>mediaTypes.video.protocols</code>: <code>".concat(Q,"</code>"),""]):t.push([p.check,"<code>mediaTypes.video.protocols</code>: <code>".concat(Q,"</code>"),"Missing protocols: <code>".concat(JSON.stringify(oe.filter(function(e){return!Q.includes(e)})),"</code>")]):t.push([p.check,"<code>mediaTypes.video.protocols</code>: <code>".concat(Q,"</code>"),"No protocol detected."]))}if(null===a.detectedCountryCodeIso3)console.error("No country code detected, cannot check GDPR params.");else if(["ALA","AUT","BEL","BGR","HRV","CYP","CZE","DNK","EST","FIN","FRA","GUF","DEU","GIB","GRC","GLP","GGY","HUN","ISL","IRL","IMN","ITA","JEY","LVA","LIE","LTU","LUX","MLT","MTQ","MYT","NLD","NOR","POL","PRT","REU","ROU","BLM","MAF","SPM","SVK","SVN","ESP","SWE","GBR"].includes(a.detectedCountryCodeIso3)){1!==w?t.push([p.ko,"<code>ortb2.regs.ext.gdpr</code>: <code>".concat(w,"</code>"),"Should be set to <code>1</code> for users in the EEA."]):t.push([p.ok,"<code>ortb2.regs.ext.gdpr</code>: <code>".concat(w,"</code>"),""]);var ne=void 0!==S?le.decode(S):null;if(null===ne)t.push([p.ko,"<code>ortb2.user.ext.consent</code>: <code>".concat(S,"</code>"),"No consent string detected, should be a valid TCFv2 string for users in the EEA."]);else{var ie={58:"33Across",779:"Adtarget Teknoloji A.S.",138:"ConnectAd Demand GmbH",90:"E-Planning (Teroa)",285:"Freewheel (Comcast)",149:"Illumin / ADman Interactive SLU",253:"Improve Digital",36:"Nexxen (Unruly)",617:"Onfocus (Adagio)",241:"OneTag",69:"OpenX",76:"Pubmatic",16:"RTB House",52:"Rubicon",45:"Smart Adserver (Equativ)",13:"Sovrn",28:"TripleLift"},se=[],ae=!1;for(var ce in ie)ne.vendorConsents.has(Number(ce))||(se.push("".concat(ie[ce]," (").concat(ce,")")),617===Number(ce)&&(ae=!0));ae?t.push([p.ko,"<code>ortb2.user.ext.consent</code>","Missing consent for: ".concat(se.join(", "))]):se.length>0?t.push([p.check,"<code>ortb2.user.ext.consent</code>","Missing consent for: ".concat(se.join(", "))]):t.push([p.ok,"<code>ortb2.user.ext.consent</code>: <code>".concat(S.substring(0,20),"...</code>"),"All Adagio partners present"])}}void 0!==L?s.prebidVersionDetected<9.39?t.push([p.info,"<code>ortb2Imp.instl</code>: <code>".concat(L,"</code>"),"Not supported before Prebid 9.39."]):t.push([p.ok,"<code>ortb2Imp.instl</code>: <code>".concat(L,"</code>"),""]):null!==k?t.push([(s.prebidVersionDetected,p.info),"<code>".concat(k.path,"</code>: <code>").concat(k.value,"</code>"),"Misplaced, should be in <code>ortb2Imp.instl</code>."]):t.push([(s.prebidVersionDetected,p.info),"<code>ortb2Imp.instl</code>: <code>undefined</code>","No interstitial parameter detected."]),void 0!==O?s.prebidVersionDetected<9.39?t.push([p.info,"<code>ortb2Imp.rwdd</code>: <code>".concat(O,"</code>"),"Not supported before Prebid 9.39."]):t.push([p.ok,"<code>ortb2Imp.rwdd</code>: <code>".concat(O,"</code>"),""]):null!==T?t.push([s.prebidVersionDetected<9.39?p.info:p.check,"<code>".concat(T.path,"</code>: <code>").concat(T.value,"</code>"),"Misplaced, should be in <code>ortb2Imp.rwdd</code>"]):t.push([s.prebidVersionDetected<9.39?p.info:p.check,"<code>ortb2Imp.rwdd</code>: <code>undefined</code>","No rewarded parameter detected."])}}(e,l);var h=l.map(function(e){return e[0]}),v=d?N(h):p.na;d&&m.push(v);var f=i.overlayFrameDoc.createElement("tr");f.classList.add("".concat(c.replace(" ","-"),"-bid")),""!==o&&o!==c&&(f.style.display="none");var g=i.overlayFrameDoc.createElement("td"),b=i.overlayFrameDoc.createElement("td"),y=i.overlayFrameDoc.createElement("td"),A=i.overlayFrameDoc.createElement("td"),C=i.overlayFrameDoc.createElement("kbd");for(var E in C.addEventListener("click",function(){return function(e,t,o){var r=i.overlayFrameDoc.createElement("dialog");r.setAttribute("open",!0);var n=i.overlayFrameDoc.createElement("article");n.style.maxWidth="100%";var s=i.overlayFrameDoc.createElement("header");s.innerHTML="<code>".concat(e.bidder,"</code>: <code>").concat(e.adUnitCode," (").concat(Object.keys(e.mediaTypes),")</code>"),s.style.marginBottom="0px";var a=i.overlayFrameDoc.createElement("a");if(a.setAttribute("aria-label","Close"),a.classList.add("close"),a.addEventListener("click",function(){r.remove()}),n.appendChild(s),s.appendChild(a),o){var c=i.overlayFrameDoc.createElement("p");!function(e,t){var o=i.overlayFrameDoc.createElement("article");o.style.padding="1em",o.style.marginLeft="",o.style.marginRight="",o.style.marginTop="1em",o.style.marginBottom="1em",o.style.color=u.yellow_txt,o.style.backgroundColor=u.yellow_bkg;var r=i.overlayFrameDoc.createElement("table"),n=i.overlayFrameDoc.createElement("thead"),s=i.overlayFrameDoc.createElement("tr"),a=i.overlayFrameDoc.createElement("th");a.setAttribute("scope","col"),a.textContent="Status";var c=i.overlayFrameDoc.createElement("th");c.setAttribute("scope","col"),c.textContent="Parameter";var d=i.overlayFrameDoc.createElement("th");d.setAttribute("scope","col"),d.textContent="Details",s.appendChild(a),s.appendChild(c),s.appendChild(d),n.appendChild(s);var l=i.overlayFrameDoc.createElement("tbody");r.appendChild(n),r.appendChild(l);var p,h=fe(t);try{for(h.s();!(p=h.n()).done;){var v=p.value;De(l,v[0],v[1],v[2])}}catch(e){h.e(e)}finally{h.f()}e.appendChild(r)}(c,t),n.appendChild(c)}var d=i.overlayFrameDoc.createElement("p");d.innerHTML='<pre><code class="language-json">'.concat(JSON.stringify(e,null,2),"</code></pre>"),n.appendChild(d),r.appendChild(n),i.overlayFrameDoc.body.appendChild(r)}(e,l,d)}),C.style.cursor="pointer",g.innerHTML=v,b.innerHTML="<code>".concat(t,"</code>"),r){var I;null!==(I=r[E])&&void 0!==I&&I.context?y.innerHTML+="<code>".concat(r[E].context,"</code> "):y.innerHTML+="<code>".concat(E,"</code> ")}C.innerHTML="🔎 ".concat(c),f.appendChild(g),f.appendChild(b),f.appendChild(y),f.appendChild(A),A.appendChild(C),n.appendChild(f)});var g=i.overlayFrameDoc.getElementById("bidderFilter");return e.forEach(function(e){var t=i.overlayFrameDoc.createElement("li"),r=i.overlayFrameDoc.createElement("label"),n=i.overlayFrameDoc.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id","".concat(e.replace(" ","-"),"-bidder")),g.appendChild(t),t.appendChild(r),r.appendChild(n),r.innerHTML+="<code>".concat(e,"</code>");var s=i.overlayFrameDoc.getElementById("".concat(e.replace(" ","-"),"-bidder"));s.checked=""===o||o===e,s.addEventListener("click",function(){toggleBidRow(s,e)})}),m}(c.prebidBidders,c.prebidBids),A=N(y),C=p.ok;0===c.totalPrebidAdUnitsCodes||0===c.totalPrebidAdagioAdUnitsCode?C=p.ko:c.totalPrebidAdUnitsCodes>c.totalPrebidAdagioAdUnitsCode&&(C=p.check);var E=y.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{}),I=Object.entries(E).map(function(e){var t=xe(e,2),o=t[0],r=t[1];return"".concat(o," (").concat(r,")")}).join(", "),w=N([A,C]);if(0===c.totalPrebidAdUnitsCodes)Oe(p.ko,h.adunits,"<code>".concat(c.totalPrebidAdUnitsCodes,"</code> adUnits(s) found"));else{var S="\n                • Adagio called for <code>".concat(c.totalPrebidAdagioAdUnitsCode,"</code> adUnit(s) out of <code>").concat(c.totalPrebidAdUnitsCodes,"</code> adUnits(s) found<br>\n            ");c.totalPrebidAdagioAdUnitsCode>0&&(S+="• Params status: ".concat(I,"<br>")),Oe(w,h.adunits,S)}}}function $e(){if(void 0!==s.prebidObject){if(void 0!==s.adagioAdapter){var e=s.prebidObject.installedModules;if(void 0!==e&&0!==e.length){var t=e.includes("rtdModule"),o=e.includes("adagioRtdProvider"),r="";if(t||o?t?o||(r="Missing adagioRtdProvider module: <code>".concat(e,"</code>")):r="Missing rtd module: <code>".concat(e,"</code>"):r="Missing rtd and adagioRtdProvider modules: <code>".concat(e,"</code>"),""!==r)return void Oe(nt(!0,9,null),h.rtdmodule,r)}else if(!s.adagioAdapter.hasRtd)return void Oe(nt(!0,9,null),h.rtdmodule,"<code>ADAGIO.hasRtd</code>: <code>".concat(s.adagioAdapter.hasRtd,"</code>"))}var n=s.prebidObject.getConfig("realTimeData");if(void 0!==n)if(void 0!==n.dataProviders){var i=n.dataProviders.find(function(e){return"adagio"===e.name})||null;if(null!==i){var a,d,l=null==i||null===(a=i.params)||void 0===a?void 0:a.organizationId;void 0!==l&&(l=l.toString());var u=null==i||null===(d=i.params)||void 0===d?void 0:d.site;void 0===l?Oe(nt(!0,9,null),h.rtdmodule,"Missing 'organizationId' parameter: <code>".concat(JSON.stringify(i),"</code>")):void 0===u?Oe(nt(!0,9,null),h.rtdmodule,"Missing 'site' parameter: <code>".concat(JSON.stringify(i),"</code>")):c.siteNames.includes(u)&&c.organizationIds.includes(l)?Oe(nt(!1,9,null),h.rtdmodule,"<code>".concat(JSON.stringify(i),"</code>")):Oe(nt(!0,9,null),h.rtdmodule,"Parameters doesn't match with bids.params: <code>".concat(JSON.stringify(i),"</code>"))}else Oe(nt(!0,9,null),h.rtdmodule,"No Adagio RTD provider configured: <code>".concat(JSON.stringify(n.dataProviders),"</code>"))}else Oe(nt(!0,9,null),h.rtdmodule,"No RTD providers configured: <code>".concat(JSON.stringify(n),"</code>"));else Oe(nt(!0,9,null),h.rtdmodule,"<code>".concat(s.prebidWrapper[0],".getConfig('realTimeData')</code>: <code>").concat(n,"</code>"))}else Oe(p.ko,h.rtdmodule,v.prebidnotfound)}function Ke(){if(void 0===s.prebidObject)Oe(p.ko,h.deviceaccess,v.prebidnotfound);else{var e=s.prebidObject.getConfig("deviceAccess");Oe(nt(!e,9,null),h.deviceaccess,"<code>".concat(s.prebidWrapper[0],".getConfig('deviceAccess')</code>: <code>").concat(e,"</code>"))}}function Ye(){if(void 0===s.prebidObject)Oe(p.ko,h.usersync,v.prebidnotfound);else{var e=s.prebidObject.getConfig("userSync");if(void 0===e)Oe(p.ko,h.usersync,"<code>".concat(s.prebidWrapper[0],".getConfig('userSync')</code>: <code>").concat(e,"</code>"));else{var t,o,r,n,i=null==e||null===(t=e.filterSettings)||void 0===t?void 0:t.iframe,a=null==e||null===(o=e.filterSettings)||void 0===o?void 0:o.all;void 0!==i&&(null!=i&&null!==(r=i.bidders)&&void 0!==r&&r.includes("*")||Array.isArray(null==i?void 0:i.bidders)&&null!=i&&i.bidders.some(function(e){var t;return null==e||null===(t=e.toLowerCase())||void 0===t?void 0:t.includes("adagio")}))&&"include"===i.filter?Oe(p.ok,h.usersync,"<code>".concat(JSON.stringify(i),"</code>")):void 0!==a&&(null!=a&&null!==(n=a.bidders)&&void 0!==n&&n.includes("*")||Array.isArray(null==a?void 0:a.bidders)&&null!=a&&a.bidders.some(function(e){var t;return null==e||null===(t=e.toLowerCase())||void 0===t?void 0:t.includes("adagio")}))&&"include"===a.filter?Oe(p.ok,h.usersync,"<code>".concat(JSON.stringify(a),"</code>")):Oe(p.ko,h.usersync,"<code>".concat(JSON.stringify(e),"</code>"))}}}function Qe(){if(void 0===s.prebidObject)Oe(p.ko,h.localstorage,v.prebidnotfound);else{var e,t,o,r=function(e){return"boolean"==typeof e?!0===e:!!Array.isArray(e)&&e.includes("html5")},n=s.prebidObject.bidderSettings;if(r(null===(e=n.standard)||void 0===e?void 0:e.storageAllowed))Oe(p.ok,h.localstorage,"<code>".concat(s.prebidWrapper[0],".bidderSettings.standard.storageAllowed</code>: <code>").concat(JSON.stringify(null===(o=n.standard)||void 0===o?void 0:o.storageAllowed),"</code>"));else if(r(null===(t=n.adagio)||void 0===t?void 0:t.storageAllowed)){var i;Oe(p.ok,h.localstorage,"<code>".concat(s.prebidWrapper[0],".bidderSettings.adagio.storageAllowed</code>: <code>").concat(JSON.stringify(null===(i=n.adagio)||void 0===i?void 0:i.storageAllowed),"</code>"))}else s.prebidVersionDetected>=9?Oe(p.na,h.localstorage,"Localstorage not found. But not required anymore since Prebid 9."):Oe(p.ko,h.localstorage,"Localstorage not found: <code>".concat(JSON.stringify(n),"</code>"))}}function Xe(){var e;if(void 0!==s.prebidObject)if(void 0!==s.adagioAdapter){var t=s.prebidVersionDetected>8.14,o=s.prebidVersionDetected>9,r=null===(e=s.adagioAdapter.versions)||void 0===e?void 0:e.adagioAnalyticsAdapter;if(t)if(r)if(o){var n,i,a,c=null===(n=s.adagioAdapter)||void 0===n||null===(n=n.options)||void 0===n?void 0:n.organizationId,d=null===(i=s.adagioAdapter)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.site;c&&d?Oe(p.ok,h.analytics,"Options: <code>".concat(null===(a=s.adagioAdapter)||void 0===a?void 0:a.options,"</code>")):Oe(p.check,h.analytics,"Missing parameters: <code>".concat(s.prebidWrapper[0],".enableAnalytics.options</code> should contain 'organizationId' and 'site'"))}else Oe(p.ok,h.analytics,"Prebid version: <code>".concat(s.prebidVersionDetected,"</code> / Analytics: <code>").concat(r,"</code>"));else Oe(p.info,h.analytics,"<code>ADAGIO.versions.adagioAnalyticsAdapter</code>: <code>".concat(r,"</code>"));else Oe(p.info,h.analytics,"<code>".concat(s.prebidWrapper[0],".version</code>: <code>").concat(s.prebidVersionDetected,"</code>"))}else Oe(p.ko,h.analytics,"<code>window.ADAGIO</code>: <code>".concat(s.adagioAdapter,"</code>"));else Oe(p.ko,h.analytics,v.prebidnotfound)}function Ze(){if(void 0!==s.prebidObject)if("function"==typeof s.prebidObject.getUserIdsAsEids){var e=s.prebidObject.getUserIdsAsEids(),t=e.length,o=e.filter(function(e){return e.uids.length>0});if(o.length>0){var r=o.length,n=o.map(function(e){return e.source}),i=r/t*100;Oe(p.ok,h.userids,"\n                • Installed / present: <code>".concat(t,"/").concat(r," (").concat(i.toFixed(2),"%)</code><br>\n                • Found uids: <code>").concat(n.join(", "),"</code>\n            "))}else Oe(p.info,h.userids,"No User IDs present")}else Oe(p.info,h.userids,"<code>".concat(s.prebidWrapper[0],".getUserIdsAsEids()</code> is not a function"));else Oe(p.ko,h.userids,v.prebidnotfound)}function et(){if(s.prebidObject){var e=[];if(c.prebidBidsRequested.filter(function(e){var t;return null===(t=e.bidderCode)||void 0===t||null===(t=t.toLowerCase())||void 0===t?void 0:t.includes("adagio")}).forEach(function(t){var o={};t.bids.forEach(function(e){var t=e.adUnitCode;Object.keys(e.mediaTypes||{}).forEach(function(e){var r="".concat(t,"::").concat(e);o[r]=(o[r]||0)+1})}),Object.entries(o).forEach(function(t){var o=xe(t,2),r=o[0];o[1]>1&&e.push(r)})}),e.length){var t=e.map(function(e){var t=xe(e.split("::"),2),o=t[0],r=t[1];return"<code>".concat(o,"</code> (<code>").concat(r,"</code>)")}).join(", ");Oe(p.ko,h.duplicated,"Duplicated found: ".concat(t))}else Oe(p.ok,h.duplicated,"No duplicated found.")}else Oe(p.ko,h.duplicated,v.prebidnotfound)}function tt(){if(void 0===s.prebidObject)Oe(p.ko,h.currency,v.prebidnotfound);else{var e=s.prebidObject.getConfig("currency");void 0!==e?Oe(p.ok,h.currency,"<code>".concat(JSON.stringify(e),"</code>")):Oe(p.check,h.currency,"<code>".concat(s.prebidWrapper[0],".getConfig('currency')</code>: <code>").concat(e,"</code>"))}}function ot(){if(void 0===s.prebidObject)Oe(p.ko,h.floors,v.prebidnotfound);else{var e=s.prebidObject.getConfig("floors");Oe(p.info,h.floors,void 0!==e?"<code>".concat(JSON.stringify(e),"</code>"):"<code>".concat(s.prebidWrapper[0],".getConfig('floors')</code>: <code>").concat(e,"</code>"))}}function rt(){if(void 0===s.prebidObject)Oe(p.ko,h.dsa,v.prebidnotfound);else{var e=s.prebidObject.getConfig("ortb2");if(void 0!==e){var t,o,r,n,i,a=null==e||null===(t=e.regs)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.dsa,c=null==e||null===(o=e.regs)||void 0===o||null===(o=o.ext)||void 0===o||null===(o=o.dsa)||void 0===o?void 0:o.dsarequired,d=null==e||null===(r=e.regs)||void 0===r||null===(r=r.ext)||void 0===r||null===(r=r.dsa)||void 0===r?void 0:r.pubrender,l=null==e||null===(n=e.regs)||void 0===n||null===(n=n.ext)||void 0===n||null===(n=n.dsa)||void 0===n?void 0:n.datatopub,u=null==e||null===(i=e.regs)||void 0===i||null===(i=i.ext)||void 0===i||null===(i=i.dsa)||void 0===i?void 0:i.transparency;Oe(void 0===a?p.info:void 0===c||void 0===d||void 0===l||void 0===u?p.ko:p.ok,h.dsa,"<code>".concat(s.prebidWrapper[0],".getConfig('ortb2').regs.ext.dsa</code>: <code>").concat(JSON.stringify(a),"</code>"))}else Oe(p.info,h.dsa,"<code>".concat(s.prebidWrapper[0],".getConfig('ortb2')</code>: <code>").concat(JSON.stringify(e),"</code>"))}}function nt(e,t,o){var r=null===t?-1/0:t,n=null===o?1/0:o;return"warn"===e?s.prebidVersionDetected>=r&&s.prebidVersionDetected<=n?p.check:p.info:e?s.prebidVersionDetected>=r&&s.prebidVersionDetected<=n?p.ko:p.info:p.ok}function it(){var e,t,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function i(o,r,n,i){var c=r&&r.prototype instanceof a?r:a,d=Object.create(c.prototype);return st(d,"_invoke",function(o,r,n){var i,a,c,d=0,l=n||[],u=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,o){return i=t,a=0,c=e,p.n=o,s}};function h(o,r){for(a=o,c=r,t=0;!u&&d&&!n&&t<l.length;t++){var n,i=l[t],h=p.p,v=i[2];o>3?(n=v===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=h&&((n=o<2&&h<i[1])?(a=0,p.v=r,p.n=i[1]):h<v&&(n=o<3||i[0]>r||r>v)&&(i[4]=o,i[5]=r,p.n=v,a=0))}if(n||o>1)return s;throw u=!0,r}return function(n,l,v){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&h(l,v),a=l,c=v;(t=a<2?e:c)||!u;){i||(a?a<3?(a>1&&(p.n=-1),h(a,c)):p.n=c:p.v=c);try{if(d=2,i){if(a||(n="next"),t=i[n]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),a=1);i=e}else if((t=(u=p.n<0)?c:o.call(r,p))!==s)break}catch(t){i=e,a=1,c=t}finally{d=1}}return{value:t,done:u}}}(o,n,i),!0),d}var s={};function a(){}function c(){}function d(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(st(t={},r,function(){return this}),t),u=d.prototype=a.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,st(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,st(u,"constructor",d),st(d,"constructor",c),c.displayName="GeneratorFunction",st(d,n,"GeneratorFunction"),st(u),st(u,n,"Generator"),st(u,r,function(){return this}),st(u,"toString",function(){return"[object Generator]"}),(it=function(){return{w:i,m:p}})()}function st(e,t,o,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}st=function(e,t,o,r){function i(t,o){st(e,t,function(e){return this._invoke(t,o,e)})}t?n?n(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},st(e,t,o,r)}function at(e,t,o,r,n,i,s){try{var a=e[i](s),c=a.value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(r,n)}function ct(){return dt.apply(this,arguments)}function dt(){var e;return e=it().m(function e(){var t;return it().w(function(e){for(;;)switch(e.n){case 0:if(Ae(),!(s.prebidWrappers.length>0)){e.n=2;break}return e.n=1,He();case 1:e.n=3;break;case 2:t=l.checker.toLowerCase().replace(" ","-"),i.overlayFrameDoc.getElementById("".concat(t,"-alert")).innerHTML+="<small>• No Prebid wrapper detected... </small><br>";case 3:return e.a(2)}},e)}),dt=function(){var t=this,o=arguments;return new Promise(function(r,n){var i=e.apply(t,o);function s(e){at(i,r,n,s,a,"next",e)}function a(e){at(i,r,n,s,a,"throw",e)}s(void 0)})},dt.apply(this,arguments)}ct()})();